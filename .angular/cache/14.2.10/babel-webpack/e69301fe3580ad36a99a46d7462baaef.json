{"ast":null,"code":"import { i as injectStyles, g as globalLocales, m as mergeProps, T as Theme, a as mapHash, V as ViewContextType, C as ContentContainer, b as buildViewClassNames, c as greatestDurationDenominator, d as createDuration, B as BASE_OPTION_DEFAULTS, f as formatWithOrdinals, D as DelayedRunner, e as createFormatter, h as diffWholeDays, j as memoize, k as buildBuildPluginHooks, l as memoizeObjArg, n as isPropsEqual, E as Emitter, o as getInitialDate, r as rangeContainsMarker, p as initEventSources, q as createEmptyEventStore, s as reduceCurrentDate, t as reduceEventSources, u as reduceEventStore, v as computeEventSourcesLoading, w as reduceEventSourcesNewTimeZone, x as rezoneEventStoreDates, y as mergeRawOptions, z as globalPlugins, A as BASE_OPTION_REFINERS, F as CALENDAR_LISTENER_REFINERS, G as CALENDAR_OPTION_REFINERS, H as COMPLEX_OPTION_COMPARATORS, I as VIEW_OPTION_REFINERS, J as DateEnv, K as DateProfileGenerator, L as createEventUi, M as parseBusinessHours, N as BaseComponent, O as setRef, P as Interaction, Q as getElSeg, R as elementClosest, S as EventImpl, U as listenBySelector, W as listenToHoverBySelector, X as PureComponent, Y as buildViewContext, Z as getUniqueDomId, _ as parseInteractionSettings, $ as interactionSettingsStore, a0 as getNow, a1 as CalendarImpl, a2 as flushSync, a3 as CalendarRoot, a4 as RenderId, a5 as isArraysEqual, a6 as applyStyleProp, a7 as sliceEventStore } from './internal-common.js';\nexport { a9 as JsonRequestError, a8 as createPlugin } from './internal-common.js';\nimport { createElement, createRef, Fragment, render } from 'preact';\nimport 'preact/compat';\nvar css_248z = \":root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc-unselectable{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:none;user-select:none}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url(\\\"data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=\\\") format(\\\"truetype\\\")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:\\\"\\\\e900\\\"}.fc-icon-chevron-right:before{content:\\\"\\\\e901\\\"}.fc-icon-chevrons-left:before{content:\\\"\\\\e902\\\"}.fc-icon-chevrons-right:before{content:\\\"\\\\e903\\\"}.fc-icon-minus-square:before{content:\\\"\\\\e904\\\"}.fc-icon-plus-square:before{content:\\\"\\\\e905\\\"}.fc-icon-x:before{content:\\\"\\\\e906\\\"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button::-moz-focus-inner{border-style:none;padding:0}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:\\\"\\\";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:\\\"\\\";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:\\\"\\\";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}\";\ninjectStyles(css_248z);\nconst MINIMAL_RAW_EN_LOCALE = {\n  code: 'en',\n  week: {\n    dow: 0,\n    doy: 4 // 4 days need to be within the year to be considered the first week\n\n  },\n  direction: 'ltr',\n  buttonText: {\n    prev: 'prev',\n    next: 'next',\n    prevYear: 'prev year',\n    nextYear: 'next year',\n    year: 'year',\n    today: 'today',\n    month: 'month',\n    week: 'week',\n    day: 'day',\n    list: 'list'\n  },\n  weekText: 'W',\n  weekTextLong: 'Week',\n  closeHint: 'Close',\n  timeHint: 'Time',\n  eventHint: 'Event',\n  allDayText: 'all-day',\n  moreLinkText: 'more',\n  noEventsText: 'No events to display'\n};\nconst RAW_EN_LOCALE = Object.assign(Object.assign({}, MINIMAL_RAW_EN_LOCALE), {\n  // Includes things we don't want other locales to inherit,\n  // things that derive from other translatable strings.\n  buttonHints: {\n    prev: 'Previous $0',\n    next: 'Next $0',\n\n    today(buttonText, unit) {\n      return unit === 'day' ? 'Today' : `This ${buttonText}`;\n    }\n\n  },\n  viewHint: '$0 view',\n  navLinkHint: 'Go to $0',\n\n  moreLinkHint(eventCnt) {\n    return `Show ${eventCnt} more event${eventCnt === 1 ? '' : 's'}`;\n  }\n\n});\n\nfunction organizeRawLocales(explicitRawLocales) {\n  let defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n  let allRawLocales = globalLocales.concat(explicitRawLocales);\n  let rawLocaleMap = {\n    en: RAW_EN_LOCALE\n  };\n\n  for (let rawLocale of allRawLocales) {\n    rawLocaleMap[rawLocale.code] = rawLocale;\n  }\n\n  return {\n    map: rawLocaleMap,\n    defaultCode\n  };\n}\n\nfunction buildLocale(inputSingular, available) {\n  if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n    return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n  }\n\n  return queryLocale(inputSingular, available);\n}\n\nfunction queryLocale(codeArg, available) {\n  let codes = [].concat(codeArg || []); // will convert to array\n\n  let raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n  return parseLocale(codeArg, codes, raw);\n}\n\nfunction queryRawLocale(codes, available) {\n  for (let i = 0; i < codes.length; i += 1) {\n    let parts = codes[i].toLocaleLowerCase().split('-');\n\n    for (let j = parts.length; j > 0; j -= 1) {\n      let simpleId = parts.slice(0, j).join('-');\n\n      if (available[simpleId]) {\n        return available[simpleId];\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction parseLocale(codeArg, codes, raw) {\n  let merged = mergeProps([MINIMAL_RAW_EN_LOCALE, raw], ['buttonText']);\n  delete merged.code; // don't want this part of the options\n\n  let {\n    week\n  } = merged;\n  delete merged.week;\n  return {\n    codeArg,\n    codes,\n    week,\n    simpleNumberFormat: new Intl.NumberFormat(codeArg),\n    options: merged\n  };\n}\n\nclass StandardTheme extends Theme {}\n\nStandardTheme.prototype.classes = {\n  root: 'fc-theme-standard',\n  tableCellShaded: 'fc-cell-shaded',\n  buttonGroup: 'fc-button-group',\n  button: 'fc-button fc-button-primary',\n  buttonActive: 'fc-button-active'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n  close: 'fc-icon-x',\n  prev: 'fc-icon-chevron-left',\n  next: 'fc-icon-chevron-right',\n  prevYear: 'fc-icon-chevrons-left',\n  nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.rtlIconClasses = {\n  prev: 'fc-icon-chevron-right',\n  next: 'fc-icon-chevron-left',\n  prevYear: 'fc-icon-chevrons-right',\n  nextYear: 'fc-icon-chevrons-left'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons'; // TODO: make TS-friendly\n\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n  let hash = {};\n  let viewType;\n\n  for (viewType in defaultConfigs) {\n    ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  }\n\n  for (viewType in overrideConfigs) {\n    ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  }\n\n  return hash;\n}\n\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n  if (hash[viewType]) {\n    return hash[viewType];\n  }\n\n  let viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n\n  if (viewDef) {\n    hash[viewType] = viewDef;\n  }\n\n  return viewDef;\n}\n\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n  let defaultConfig = defaultConfigs[viewType];\n  let overrideConfig = overrideConfigs[viewType];\n\n  let queryProp = name => defaultConfig && defaultConfig[name] !== null ? defaultConfig[name] : overrideConfig && overrideConfig[name] !== null ? overrideConfig[name] : null;\n\n  let theComponent = queryProp('component');\n  let superType = queryProp('superType');\n  let superDef = null;\n\n  if (superType) {\n    if (superType === viewType) {\n      throw new Error('Can\\'t have a custom view type that references itself');\n    }\n\n    superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n  }\n\n  if (!theComponent && superDef) {\n    theComponent = superDef.component;\n  }\n\n  if (!theComponent) {\n    return null; // don't throw a warning, might be settings for a single-unit view\n  }\n\n  return {\n    type: viewType,\n    component: theComponent,\n    defaults: Object.assign(Object.assign({}, superDef ? superDef.defaults : {}), defaultConfig ? defaultConfig.rawOptions : {}),\n    overrides: Object.assign(Object.assign({}, superDef ? superDef.overrides : {}), overrideConfig ? overrideConfig.rawOptions : {})\n  };\n}\n\nfunction parseViewConfigs(inputs) {\n  return mapHash(inputs, parseViewConfig);\n}\n\nfunction parseViewConfig(input) {\n  let rawOptions = typeof input === 'function' ? {\n    component: input\n  } : input;\n  let {\n    component\n  } = rawOptions;\n\n  if (rawOptions.content) {\n    component = createViewHookComponent(rawOptions); // TODO: remove content/classNames/didMount/etc from options?\n  }\n\n  return {\n    superType: rawOptions.type,\n    component: component,\n    rawOptions // includes type and component too :(\n\n  };\n}\n\nfunction createViewHookComponent(options) {\n  return viewProps => createElement(ViewContextType.Consumer, null, context => createElement(ContentContainer, {\n    elTag: \"div\",\n    elClasses: buildViewClassNames(context.viewSpec),\n    renderProps: Object.assign(Object.assign({}, viewProps), {\n      nextDayThreshold: context.options.nextDayThreshold\n    }),\n    generatorName: undefined,\n    generator: options.content,\n    classNameGenerator: options.classNames,\n    didMount: options.didMount,\n    willUnmount: options.willUnmount\n  }));\n}\n\nfunction buildViewSpecs(defaultInputs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n  let defaultConfigs = parseViewConfigs(defaultInputs);\n  let overrideConfigs = parseViewConfigs(optionOverrides.views);\n  let viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n  return mapHash(viewDefs, viewDef => buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults));\n}\n\nfunction buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n  let durationInput = viewDef.overrides.duration || viewDef.defaults.duration || dynamicOptionOverrides.duration || optionOverrides.duration;\n  let duration = null;\n  let durationUnit = '';\n  let singleUnit = '';\n  let singleUnitOverrides = {};\n\n  if (durationInput) {\n    duration = createDurationCached(durationInput);\n\n    if (duration) {\n      // valid?\n      let denom = greatestDurationDenominator(duration);\n      durationUnit = denom.unit;\n\n      if (denom.value === 1) {\n        singleUnit = durationUnit;\n        singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].rawOptions : {};\n      }\n    }\n  }\n\n  let queryButtonText = optionsSubset => {\n    let buttonTextMap = optionsSubset.buttonText || {};\n    let buttonTextKey = viewDef.defaults.buttonTextKey;\n\n    if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n      return buttonTextMap[buttonTextKey];\n    }\n\n    if (buttonTextMap[viewDef.type] != null) {\n      return buttonTextMap[viewDef.type];\n    }\n\n    if (buttonTextMap[singleUnit] != null) {\n      return buttonTextMap[singleUnit];\n    }\n\n    return null;\n  };\n\n  let queryButtonTitle = optionsSubset => {\n    let buttonHints = optionsSubset.buttonHints || {};\n    let buttonKey = viewDef.defaults.buttonTextKey; // use same key as text\n\n    if (buttonKey != null && buttonHints[buttonKey] != null) {\n      return buttonHints[buttonKey];\n    }\n\n    if (buttonHints[viewDef.type] != null) {\n      return buttonHints[viewDef.type];\n    }\n\n    if (buttonHints[singleUnit] != null) {\n      return buttonHints[singleUnit];\n    }\n\n    return null;\n  };\n\n  return {\n    type: viewDef.type,\n    component: viewDef.component,\n    duration,\n    durationUnit,\n    singleUnit,\n    optionDefaults: viewDef.defaults,\n    optionOverrides: Object.assign(Object.assign({}, singleUnitOverrides), viewDef.overrides),\n    buttonTextOverride: queryButtonText(dynamicOptionOverrides) || queryButtonText(optionOverrides) || // constructor-specified buttonText lookup hash takes precedence\n    viewDef.overrides.buttonText,\n    buttonTextDefault: queryButtonText(localeDefaults) || viewDef.defaults.buttonText || queryButtonText(BASE_OPTION_DEFAULTS) || viewDef.type,\n    // not DRY\n    buttonTitleOverride: queryButtonTitle(dynamicOptionOverrides) || queryButtonTitle(optionOverrides) || viewDef.overrides.buttonHint,\n    buttonTitleDefault: queryButtonTitle(localeDefaults) || viewDef.defaults.buttonHint || queryButtonTitle(BASE_OPTION_DEFAULTS) // will eventually fall back to buttonText\n\n  };\n} // hack to get memoization working\n\n\nlet durationInputMap = {};\n\nfunction createDurationCached(durationInput) {\n  let json = JSON.stringify(durationInput);\n  let res = durationInputMap[json];\n\n  if (res === undefined) {\n    res = createDuration(durationInput);\n    durationInputMap[json] = res;\n  }\n\n  return res;\n}\n\nfunction reduceViewType(viewType, action) {\n  switch (action.type) {\n    case 'CHANGE_VIEW_TYPE':\n      viewType = action.viewType;\n  }\n\n  return viewType;\n}\n\nfunction reduceDynamicOptionOverrides(dynamicOptionOverrides, action) {\n  switch (action.type) {\n    case 'SET_OPTION':\n      return Object.assign(Object.assign({}, dynamicOptionOverrides), {\n        [action.optionName]: action.rawOptionValue\n      });\n\n    default:\n      return dynamicOptionOverrides;\n  }\n}\n\nfunction reduceDateProfile(currentDateProfile, action, currentDate, dateProfileGenerator) {\n  let dp;\n\n  switch (action.type) {\n    case 'CHANGE_VIEW_TYPE':\n      return dateProfileGenerator.build(action.dateMarker || currentDate);\n\n    case 'CHANGE_DATE':\n      return dateProfileGenerator.build(action.dateMarker);\n\n    case 'PREV':\n      dp = dateProfileGenerator.buildPrev(currentDateProfile, currentDate);\n\n      if (dp.isValid) {\n        return dp;\n      }\n\n      break;\n\n    case 'NEXT':\n      dp = dateProfileGenerator.buildNext(currentDateProfile, currentDate);\n\n      if (dp.isValid) {\n        return dp;\n      }\n\n      break;\n  }\n\n  return currentDateProfile;\n}\n\nfunction reduceDateSelection(currentSelection, action) {\n  switch (action.type) {\n    case 'UNSELECT_DATES':\n      return null;\n\n    case 'SELECT_DATES':\n      return action.selection;\n\n    default:\n      return currentSelection;\n  }\n}\n\nfunction reduceSelectedEvent(currentInstanceId, action) {\n  switch (action.type) {\n    case 'UNSELECT_EVENT':\n      return '';\n\n    case 'SELECT_EVENT':\n      return action.eventInstanceId;\n\n    default:\n      return currentInstanceId;\n  }\n}\n\nfunction reduceEventDrag(currentDrag, action) {\n  let newDrag;\n\n  switch (action.type) {\n    case 'UNSET_EVENT_DRAG':\n      return null;\n\n    case 'SET_EVENT_DRAG':\n      newDrag = action.state;\n      return {\n        affectedEvents: newDrag.affectedEvents,\n        mutatedEvents: newDrag.mutatedEvents,\n        isEvent: newDrag.isEvent\n      };\n\n    default:\n      return currentDrag;\n  }\n}\n\nfunction reduceEventResize(currentResize, action) {\n  let newResize;\n\n  switch (action.type) {\n    case 'UNSET_EVENT_RESIZE':\n      return null;\n\n    case 'SET_EVENT_RESIZE':\n      newResize = action.state;\n      return {\n        affectedEvents: newResize.affectedEvents,\n        mutatedEvents: newResize.mutatedEvents,\n        isEvent: newResize.isEvent\n      };\n\n    default:\n      return currentResize;\n  }\n}\n\nfunction parseToolbars(calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n  let header = calendarOptions.headerToolbar ? parseToolbar(calendarOptions.headerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n  let footer = calendarOptions.footerToolbar ? parseToolbar(calendarOptions.footerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n  return {\n    header,\n    footer\n  };\n}\n\nfunction parseToolbar(sectionStrHash, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n  let sectionWidgets = {};\n  let viewsWithButtons = [];\n  let hasTitle = false;\n\n  for (let sectionName in sectionStrHash) {\n    let sectionStr = sectionStrHash[sectionName];\n    let sectionRes = parseSection(sectionStr, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi);\n    sectionWidgets[sectionName] = sectionRes.widgets;\n    viewsWithButtons.push(...sectionRes.viewsWithButtons);\n    hasTitle = hasTitle || sectionRes.hasTitle;\n  }\n\n  return {\n    sectionWidgets,\n    viewsWithButtons,\n    hasTitle\n  };\n}\n/*\nBAD: querying icons and text here. should be done at render time\n*/\n\n\nfunction parseSection(sectionStr, calendarOptions, // defaults+overrides, then refined\ncalendarOptionOverrides, // overrides only!, unrefined :(\ntheme, viewSpecs, calendarApi) {\n  let isRtl = calendarOptions.direction === 'rtl';\n  let calendarCustomButtons = calendarOptions.customButtons || {};\n  let calendarButtonTextOverrides = calendarOptionOverrides.buttonText || {};\n  let calendarButtonText = calendarOptions.buttonText || {};\n  let calendarButtonHintOverrides = calendarOptionOverrides.buttonHints || {};\n  let calendarButtonHints = calendarOptions.buttonHints || {};\n  let sectionSubstrs = sectionStr ? sectionStr.split(' ') : [];\n  let viewsWithButtons = [];\n  let hasTitle = false;\n  let widgets = sectionSubstrs.map(buttonGroupStr => buttonGroupStr.split(',').map(buttonName => {\n    if (buttonName === 'title') {\n      hasTitle = true;\n      return {\n        buttonName\n      };\n    }\n\n    let customButtonProps;\n    let viewSpec;\n    let buttonClick;\n    let buttonIcon; // only one of these will be set\n\n    let buttonText; // \"\n\n    let buttonHint; // ^ for the title=\"\" attribute, for accessibility\n\n    if (customButtonProps = calendarCustomButtons[buttonName]) {\n      buttonClick = ev => {\n        if (customButtonProps.click) {\n          customButtonProps.click.call(ev.target, ev, ev.target); // TODO: use Calendar this context?\n        }\n      };\n\n      (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) || (buttonIcon = theme.getIconClass(buttonName, isRtl)) || (buttonText = customButtonProps.text);\n      buttonHint = customButtonProps.hint || customButtonProps.text;\n    } else if (viewSpec = viewSpecs[buttonName]) {\n      viewsWithButtons.push(buttonName);\n\n      buttonClick = () => {\n        calendarApi.changeView(buttonName);\n      };\n\n      (buttonText = viewSpec.buttonTextOverride) || (buttonIcon = theme.getIconClass(buttonName, isRtl)) || (buttonText = viewSpec.buttonTextDefault);\n      let textFallback = viewSpec.buttonTextOverride || viewSpec.buttonTextDefault;\n      buttonHint = formatWithOrdinals(viewSpec.buttonTitleOverride || viewSpec.buttonTitleDefault || calendarOptions.viewHint, [textFallback, buttonName], // view-name = buttonName\n      textFallback);\n    } else if (calendarApi[buttonName]) {\n      // a calendarApi method\n      buttonClick = () => {\n        calendarApi[buttonName]();\n      };\n\n      (buttonText = calendarButtonTextOverrides[buttonName]) || (buttonIcon = theme.getIconClass(buttonName, isRtl)) || (buttonText = calendarButtonText[buttonName]); // everything else is considered default\n\n      if (buttonName === 'prevYear' || buttonName === 'nextYear') {\n        let prevOrNext = buttonName === 'prevYear' ? 'prev' : 'next';\n        buttonHint = formatWithOrdinals(calendarButtonHintOverrides[prevOrNext] || calendarButtonHints[prevOrNext], [calendarButtonText.year || 'year', 'year'], calendarButtonText[buttonName]);\n      } else {\n        buttonHint = navUnit => formatWithOrdinals(calendarButtonHintOverrides[buttonName] || calendarButtonHints[buttonName], [calendarButtonText[navUnit] || navUnit, navUnit], calendarButtonText[buttonName]);\n      }\n    }\n\n    return {\n      buttonName,\n      buttonClick,\n      buttonIcon,\n      buttonText,\n      buttonHint\n    };\n  }));\n  return {\n    widgets,\n    viewsWithButtons,\n    hasTitle\n  };\n} // always represents the current view. otherwise, it'd need to change value every time date changes\n\n\nclass ViewImpl {\n  constructor(type, getCurrentData, dateEnv) {\n    this.type = type;\n    this.getCurrentData = getCurrentData;\n    this.dateEnv = dateEnv;\n  }\n\n  get calendar() {\n    return this.getCurrentData().calendarApi;\n  }\n\n  get title() {\n    return this.getCurrentData().viewTitle;\n  }\n\n  get activeStart() {\n    return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start);\n  }\n\n  get activeEnd() {\n    return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end);\n  }\n\n  get currentStart() {\n    return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start);\n  }\n\n  get currentEnd() {\n    return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end);\n  }\n\n  getOption(name) {\n    return this.getCurrentData().options[name]; // are the view-specific options\n  }\n\n}\n\nclass TaskRunner {\n  constructor(runTaskOption, drainedOption) {\n    this.runTaskOption = runTaskOption;\n    this.drainedOption = drainedOption;\n    this.queue = [];\n    this.delayedRunner = new DelayedRunner(this.drain.bind(this));\n  }\n\n  request(task, delay) {\n    this.queue.push(task);\n    this.delayedRunner.request(delay);\n  }\n\n  pause(scope) {\n    this.delayedRunner.pause(scope);\n  }\n\n  resume(scope, force) {\n    this.delayedRunner.resume(scope, force);\n  }\n\n  drain() {\n    let {\n      queue\n    } = this;\n\n    while (queue.length) {\n      let completedTasks = [];\n      let task;\n\n      while (task = queue.shift()) {\n        this.runTask(task);\n        completedTasks.push(task);\n      }\n\n      this.drained(completedTasks);\n    } // keep going, in case new tasks were added in the drained handler\n\n  }\n\n  runTask(task) {\n    if (this.runTaskOption) {\n      this.runTaskOption(task);\n    }\n  }\n\n  drained(completedTasks) {\n    if (this.drainedOption) {\n      this.drainedOption(completedTasks);\n    }\n  }\n\n} // Computes what the title at the top of the calendarApi should be for this view\n\n\nfunction buildTitle(dateProfile, viewOptions, dateEnv) {\n  let range; // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n\n  if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n    range = dateProfile.currentRange;\n  } else {\n    // for day units or smaller, use the actual day range\n    range = dateProfile.activeRange;\n  }\n\n  return dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || buildTitleFormat(dateProfile)), {\n    isEndExclusive: dateProfile.isRangeAllDay,\n    defaultSeparator: viewOptions.titleRangeSeparator\n  });\n} // Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\n\n\nfunction buildTitleFormat(dateProfile) {\n  let {\n    currentRangeUnit\n  } = dateProfile;\n\n  if (currentRangeUnit === 'year') {\n    return {\n      year: 'numeric'\n    };\n  }\n\n  if (currentRangeUnit === 'month') {\n    return {\n      year: 'numeric',\n      month: 'long'\n    }; // like \"September 2014\"\n  }\n\n  let days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n\n  if (days !== null && days > 1) {\n    // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n    return {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    };\n  } // one day. longer, like \"September 9 2014\"\n\n\n  return {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  };\n} // in future refactor, do the redux-style function(state=initial) for initial-state\n// also, whatever is happening in constructor, have it happen in action queue too\n\n\nclass CalendarDataManager {\n  constructor(props) {\n    this.computeOptionsData = memoize(this._computeOptionsData);\n    this.computeCurrentViewData = memoize(this._computeCurrentViewData);\n    this.organizeRawLocales = memoize(organizeRawLocales);\n    this.buildLocale = memoize(buildLocale);\n    this.buildPluginHooks = buildBuildPluginHooks();\n    this.buildDateEnv = memoize(buildDateEnv$1);\n    this.buildTheme = memoize(buildTheme);\n    this.parseToolbars = memoize(parseToolbars);\n    this.buildViewSpecs = memoize(buildViewSpecs);\n    this.buildDateProfileGenerator = memoizeObjArg(buildDateProfileGenerator);\n    this.buildViewApi = memoize(buildViewApi);\n    this.buildViewUiProps = memoizeObjArg(buildViewUiProps);\n    this.buildEventUiBySource = memoize(buildEventUiBySource, isPropsEqual);\n    this.buildEventUiBases = memoize(buildEventUiBases);\n    this.parseContextBusinessHours = memoizeObjArg(parseContextBusinessHours);\n    this.buildTitle = memoize(buildTitle);\n    this.emitter = new Emitter();\n    this.actionRunner = new TaskRunner(this._handleAction.bind(this), this.updateData.bind(this));\n    this.currentCalendarOptionsInput = {};\n    this.currentCalendarOptionsRefined = {};\n    this.currentViewOptionsInput = {};\n    this.currentViewOptionsRefined = {};\n    this.currentCalendarOptionsRefiners = {};\n\n    this.getCurrentData = () => this.data;\n\n    this.dispatch = action => {\n      this.actionRunner.request(action); // protects against recursive calls to _handleAction\n    };\n\n    this.props = props;\n    this.actionRunner.pause();\n    let dynamicOptionOverrides = {};\n    let optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n    let currentViewType = optionsData.calendarOptions.initialView || optionsData.pluginHooks.initialView;\n    let currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides); // wire things up\n    // TODO: not DRY\n\n    props.calendarApi.currentDataManager = this;\n    this.emitter.setThisContext(props.calendarApi);\n    this.emitter.setOptions(currentViewData.options);\n    let currentDate = getInitialDate(optionsData.calendarOptions, optionsData.dateEnv);\n    let dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n\n    if (!rangeContainsMarker(dateProfile.activeRange, currentDate)) {\n      currentDate = dateProfile.currentRange.start;\n    }\n\n    let calendarContext = {\n      dateEnv: optionsData.dateEnv,\n      options: optionsData.calendarOptions,\n      pluginHooks: optionsData.pluginHooks,\n      calendarApi: props.calendarApi,\n      dispatch: this.dispatch,\n      emitter: this.emitter,\n      getCurrentData: this.getCurrentData\n    }; // needs to be after setThisContext\n\n    for (let callback of optionsData.pluginHooks.contextInit) {\n      callback(calendarContext);\n    } // NOT DRY\n\n\n    let eventSources = initEventSources(optionsData.calendarOptions, dateProfile, calendarContext);\n    let initialState = {\n      dynamicOptionOverrides,\n      currentViewType,\n      currentDate,\n      dateProfile,\n      businessHours: this.parseContextBusinessHours(calendarContext),\n      eventSources,\n      eventUiBases: {},\n      eventStore: createEmptyEventStore(),\n      renderableEventStore: createEmptyEventStore(),\n      dateSelection: null,\n      eventSelection: '',\n      eventDrag: null,\n      eventResize: null,\n      selectionConfig: this.buildViewUiProps(calendarContext).selectionConfig\n    };\n    let contextAndState = Object.assign(Object.assign({}, calendarContext), initialState);\n\n    for (let reducer of optionsData.pluginHooks.reducers) {\n      Object.assign(initialState, reducer(null, null, contextAndState));\n    }\n\n    if (computeIsLoading(initialState, calendarContext)) {\n      this.emitter.trigger('loading', true); // NOT DRY\n    }\n\n    this.state = initialState;\n    this.updateData();\n    this.actionRunner.resume();\n  }\n\n  resetOptions(optionOverrides, append) {\n    let {\n      props\n    } = this;\n    props.optionOverrides = append ? Object.assign(Object.assign({}, props.optionOverrides), optionOverrides) : optionOverrides;\n    this.actionRunner.request({\n      type: 'NOTHING'\n    });\n  }\n\n  _handleAction(action) {\n    let {\n      props,\n      state,\n      emitter\n    } = this;\n    let dynamicOptionOverrides = reduceDynamicOptionOverrides(state.dynamicOptionOverrides, action);\n    let optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n    let currentViewType = reduceViewType(state.currentViewType, action);\n    let currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides); // wire things up\n    // TODO: not DRY\n\n    props.calendarApi.currentDataManager = this;\n    emitter.setThisContext(props.calendarApi);\n    emitter.setOptions(currentViewData.options);\n    let calendarContext = {\n      dateEnv: optionsData.dateEnv,\n      options: optionsData.calendarOptions,\n      pluginHooks: optionsData.pluginHooks,\n      calendarApi: props.calendarApi,\n      dispatch: this.dispatch,\n      emitter,\n      getCurrentData: this.getCurrentData\n    };\n    let {\n      currentDate,\n      dateProfile\n    } = state;\n\n    if (this.data && this.data.dateProfileGenerator !== currentViewData.dateProfileGenerator) {\n      // hack\n      dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n    }\n\n    currentDate = reduceCurrentDate(currentDate, action);\n    dateProfile = reduceDateProfile(dateProfile, action, currentDate, currentViewData.dateProfileGenerator);\n\n    if (action.type === 'PREV' || // TODO: move this logic into DateProfileGenerator\n    action.type === 'NEXT' || // \"\n    !rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n      currentDate = dateProfile.currentRange.start;\n    }\n\n    let eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendarContext);\n    let eventStore = reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendarContext);\n    let isEventsLoading = computeEventSourcesLoading(eventSources); // BAD. also called in this func in computeIsLoading\n\n    let renderableEventStore = isEventsLoading && !currentViewData.options.progressiveEventRendering ? state.renderableEventStore || eventStore : // try from previous state\n    eventStore;\n    let {\n      eventUiSingleBase,\n      selectionConfig\n    } = this.buildViewUiProps(calendarContext); // will memoize obj\n\n    let eventUiBySource = this.buildEventUiBySource(eventSources);\n    let eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n    let newState = {\n      dynamicOptionOverrides,\n      currentViewType,\n      currentDate,\n      dateProfile,\n      eventSources,\n      eventStore,\n      renderableEventStore,\n      selectionConfig,\n      eventUiBases,\n      businessHours: this.parseContextBusinessHours(calendarContext),\n      dateSelection: reduceDateSelection(state.dateSelection, action),\n      eventSelection: reduceSelectedEvent(state.eventSelection, action),\n      eventDrag: reduceEventDrag(state.eventDrag, action),\n      eventResize: reduceEventResize(state.eventResize, action)\n    };\n    let contextAndState = Object.assign(Object.assign({}, calendarContext), newState);\n\n    for (let reducer of optionsData.pluginHooks.reducers) {\n      Object.assign(newState, reducer(state, action, contextAndState)); // give the OLD state, for old value\n    }\n\n    let wasLoading = computeIsLoading(state, calendarContext);\n    let isLoading = computeIsLoading(newState, calendarContext); // TODO: use propSetHandlers in plugin system\n\n    if (!wasLoading && isLoading) {\n      emitter.trigger('loading', true);\n    } else if (wasLoading && !isLoading) {\n      emitter.trigger('loading', false);\n    }\n\n    this.state = newState;\n\n    if (props.onAction) {\n      props.onAction(action);\n    }\n  }\n\n  updateData() {\n    let {\n      props,\n      state\n    } = this;\n    let oldData = this.data;\n    let optionsData = this.computeOptionsData(props.optionOverrides, state.dynamicOptionOverrides, props.calendarApi);\n    let currentViewData = this.computeCurrentViewData(state.currentViewType, optionsData, props.optionOverrides, state.dynamicOptionOverrides);\n    let data = this.data = Object.assign(Object.assign(Object.assign({\n      viewTitle: this.buildTitle(state.dateProfile, currentViewData.options, optionsData.dateEnv),\n      calendarApi: props.calendarApi,\n      dispatch: this.dispatch,\n      emitter: this.emitter,\n      getCurrentData: this.getCurrentData\n    }, optionsData), currentViewData), state);\n    let changeHandlers = optionsData.pluginHooks.optionChangeHandlers;\n    let oldCalendarOptions = oldData && oldData.calendarOptions;\n    let newCalendarOptions = optionsData.calendarOptions;\n\n    if (oldCalendarOptions && oldCalendarOptions !== newCalendarOptions) {\n      if (oldCalendarOptions.timeZone !== newCalendarOptions.timeZone) {\n        // hack\n        state.eventSources = data.eventSources = reduceEventSourcesNewTimeZone(data.eventSources, state.dateProfile, data);\n        state.eventStore = data.eventStore = rezoneEventStoreDates(data.eventStore, oldData.dateEnv, data.dateEnv);\n      }\n\n      for (let optionName in changeHandlers) {\n        if (oldCalendarOptions[optionName] !== newCalendarOptions[optionName]) {\n          changeHandlers[optionName](newCalendarOptions[optionName], data);\n        }\n      }\n    }\n\n    if (props.onData) {\n      props.onData(data);\n    }\n  }\n\n  _computeOptionsData(optionOverrides, dynamicOptionOverrides, calendarApi) {\n    // TODO: blacklist options that are handled by optionChangeHandlers\n    let {\n      refinedOptions,\n      pluginHooks,\n      localeDefaults,\n      availableLocaleData,\n      extra\n    } = this.processRawCalendarOptions(optionOverrides, dynamicOptionOverrides);\n    warnUnknownOptions(extra);\n    let dateEnv = this.buildDateEnv(refinedOptions.timeZone, refinedOptions.locale, refinedOptions.weekNumberCalculation, refinedOptions.firstDay, refinedOptions.weekText, pluginHooks, availableLocaleData, refinedOptions.defaultRangeSeparator);\n    let viewSpecs = this.buildViewSpecs(pluginHooks.views, optionOverrides, dynamicOptionOverrides, localeDefaults);\n    let theme = this.buildTheme(refinedOptions, pluginHooks);\n    let toolbarConfig = this.parseToolbars(refinedOptions, optionOverrides, theme, viewSpecs, calendarApi);\n    return {\n      calendarOptions: refinedOptions,\n      pluginHooks,\n      dateEnv,\n      viewSpecs,\n      theme,\n      toolbarConfig,\n      localeDefaults,\n      availableRawLocales: availableLocaleData.map\n    };\n  } // always called from behind a memoizer\n\n\n  processRawCalendarOptions(optionOverrides, dynamicOptionOverrides) {\n    let {\n      locales,\n      locale\n    } = mergeRawOptions([BASE_OPTION_DEFAULTS, optionOverrides, dynamicOptionOverrides]);\n    let availableLocaleData = this.organizeRawLocales(locales);\n    let availableRawLocales = availableLocaleData.map;\n    let localeDefaults = this.buildLocale(locale || availableLocaleData.defaultCode, availableRawLocales).options;\n    let pluginHooks = this.buildPluginHooks(optionOverrides.plugins || [], globalPlugins);\n    let refiners = this.currentCalendarOptionsRefiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n    let extra = {};\n    let raw = mergeRawOptions([BASE_OPTION_DEFAULTS, localeDefaults, optionOverrides, dynamicOptionOverrides]);\n    let refined = {};\n    let currentRaw = this.currentCalendarOptionsInput;\n    let currentRefined = this.currentCalendarOptionsRefined;\n    let anyChanges = false;\n\n    for (let optionName in raw) {\n      if (optionName !== 'plugins') {\n        // because plugins is special-cased\n        if (raw[optionName] === currentRaw[optionName] || COMPLEX_OPTION_COMPARATORS[optionName] && optionName in currentRaw && COMPLEX_OPTION_COMPARATORS[optionName](currentRaw[optionName], raw[optionName])) {\n          refined[optionName] = currentRefined[optionName];\n        } else if (refiners[optionName]) {\n          refined[optionName] = refiners[optionName](raw[optionName]);\n          anyChanges = true;\n        } else {\n          extra[optionName] = currentRaw[optionName];\n        }\n      }\n    }\n\n    if (anyChanges) {\n      this.currentCalendarOptionsInput = raw;\n      this.currentCalendarOptionsRefined = refined;\n    }\n\n    return {\n      rawOptions: this.currentCalendarOptionsInput,\n      refinedOptions: this.currentCalendarOptionsRefined,\n      pluginHooks,\n      availableLocaleData,\n      localeDefaults,\n      extra\n    };\n  }\n\n  _computeCurrentViewData(viewType, optionsData, optionOverrides, dynamicOptionOverrides) {\n    let viewSpec = optionsData.viewSpecs[viewType];\n\n    if (!viewSpec) {\n      throw new Error(`viewType \"${viewType}\" is not available. Please make sure you've loaded all neccessary plugins`);\n    }\n\n    let {\n      refinedOptions,\n      extra\n    } = this.processRawViewOptions(viewSpec, optionsData.pluginHooks, optionsData.localeDefaults, optionOverrides, dynamicOptionOverrides);\n    warnUnknownOptions(extra);\n    let dateProfileGenerator = this.buildDateProfileGenerator({\n      dateProfileGeneratorClass: viewSpec.optionDefaults.dateProfileGeneratorClass,\n      duration: viewSpec.duration,\n      durationUnit: viewSpec.durationUnit,\n      usesMinMaxTime: viewSpec.optionDefaults.usesMinMaxTime,\n      dateEnv: optionsData.dateEnv,\n      calendarApi: this.props.calendarApi,\n      slotMinTime: refinedOptions.slotMinTime,\n      slotMaxTime: refinedOptions.slotMaxTime,\n      showNonCurrentDates: refinedOptions.showNonCurrentDates,\n      dayCount: refinedOptions.dayCount,\n      dateAlignment: refinedOptions.dateAlignment,\n      dateIncrement: refinedOptions.dateIncrement,\n      hiddenDays: refinedOptions.hiddenDays,\n      weekends: refinedOptions.weekends,\n      nowInput: refinedOptions.now,\n      validRangeInput: refinedOptions.validRange,\n      visibleRangeInput: refinedOptions.visibleRange,\n      monthMode: refinedOptions.monthMode,\n      fixedWeekCount: refinedOptions.fixedWeekCount\n    });\n    let viewApi = this.buildViewApi(viewType, this.getCurrentData, optionsData.dateEnv);\n    return {\n      viewSpec,\n      options: refinedOptions,\n      dateProfileGenerator,\n      viewApi\n    };\n  }\n\n  processRawViewOptions(viewSpec, pluginHooks, localeDefaults, optionOverrides, dynamicOptionOverrides) {\n    let raw = mergeRawOptions([BASE_OPTION_DEFAULTS, viewSpec.optionDefaults, localeDefaults, optionOverrides, viewSpec.optionOverrides, dynamicOptionOverrides]);\n    let refiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), VIEW_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n    let refined = {};\n    let currentRaw = this.currentViewOptionsInput;\n    let currentRefined = this.currentViewOptionsRefined;\n    let anyChanges = false;\n    let extra = {};\n\n    for (let optionName in raw) {\n      if (raw[optionName] === currentRaw[optionName] || COMPLEX_OPTION_COMPARATORS[optionName] && COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], currentRaw[optionName])) {\n        refined[optionName] = currentRefined[optionName];\n      } else {\n        if (raw[optionName] === this.currentCalendarOptionsInput[optionName] || COMPLEX_OPTION_COMPARATORS[optionName] && COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], this.currentCalendarOptionsInput[optionName])) {\n          if (optionName in this.currentCalendarOptionsRefined) {\n            // might be an \"extra\" prop\n            refined[optionName] = this.currentCalendarOptionsRefined[optionName];\n          }\n        } else if (refiners[optionName]) {\n          refined[optionName] = refiners[optionName](raw[optionName]);\n        } else {\n          extra[optionName] = raw[optionName];\n        }\n\n        anyChanges = true;\n      }\n    }\n\n    if (anyChanges) {\n      this.currentViewOptionsInput = raw;\n      this.currentViewOptionsRefined = refined;\n    }\n\n    return {\n      rawOptions: this.currentViewOptionsInput,\n      refinedOptions: this.currentViewOptionsRefined,\n      extra\n    };\n  }\n\n}\n\nfunction buildDateEnv$1(timeZone, explicitLocale, weekNumberCalculation, firstDay, weekText, pluginHooks, availableLocaleData, defaultSeparator) {\n  let locale = buildLocale(explicitLocale || availableLocaleData.defaultCode, availableLocaleData.map);\n  return new DateEnv({\n    calendarSystem: 'gregory',\n    timeZone,\n    namedTimeZoneImpl: pluginHooks.namedTimeZonedImpl,\n    locale,\n    weekNumberCalculation,\n    firstDay,\n    weekText,\n    cmdFormatter: pluginHooks.cmdFormatter,\n    defaultSeparator\n  });\n}\n\nfunction buildTheme(options, pluginHooks) {\n  let ThemeClass = pluginHooks.themeClasses[options.themeSystem] || StandardTheme;\n  return new ThemeClass(options);\n}\n\nfunction buildDateProfileGenerator(props) {\n  let DateProfileGeneratorClass = props.dateProfileGeneratorClass || DateProfileGenerator;\n  return new DateProfileGeneratorClass(props);\n}\n\nfunction buildViewApi(type, getCurrentData, dateEnv) {\n  return new ViewImpl(type, getCurrentData, dateEnv);\n}\n\nfunction buildEventUiBySource(eventSources) {\n  return mapHash(eventSources, eventSource => eventSource.ui);\n}\n\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n  let eventUiBases = {\n    '': eventUiSingleBase\n  };\n\n  for (let defId in eventDefs) {\n    let def = eventDefs[defId];\n\n    if (def.sourceId && eventUiBySource[def.sourceId]) {\n      eventUiBases[defId] = eventUiBySource[def.sourceId];\n    }\n  }\n\n  return eventUiBases;\n}\n\nfunction buildViewUiProps(calendarContext) {\n  let {\n    options\n  } = calendarContext;\n  return {\n    eventUiSingleBase: createEventUi({\n      display: options.eventDisplay,\n      editable: options.editable,\n      startEditable: options.eventStartEditable,\n      durationEditable: options.eventDurationEditable,\n      constraint: options.eventConstraint,\n      overlap: typeof options.eventOverlap === 'boolean' ? options.eventOverlap : undefined,\n      allow: options.eventAllow,\n      backgroundColor: options.eventBackgroundColor,\n      borderColor: options.eventBorderColor,\n      textColor: options.eventTextColor,\n      color: options.eventColor // classNames: options.eventClassNames // render hook will handle this\n\n    }, calendarContext),\n    selectionConfig: createEventUi({\n      constraint: options.selectConstraint,\n      overlap: typeof options.selectOverlap === 'boolean' ? options.selectOverlap : undefined,\n      allow: options.selectAllow\n    }, calendarContext)\n  };\n}\n\nfunction computeIsLoading(state, context) {\n  for (let isLoadingFunc of context.pluginHooks.isLoadingFuncs) {\n    if (isLoadingFunc(state)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction parseContextBusinessHours(calendarContext) {\n  return parseBusinessHours(calendarContext.options.businessHours, calendarContext);\n}\n\nfunction warnUnknownOptions(options, viewName) {\n  for (let optionName in options) {\n    console.warn(`Unknown option '${optionName}'` + (viewName ? ` for view '${viewName}'` : ''));\n  }\n}\n\nclass ToolbarSection extends BaseComponent {\n  render() {\n    let children = this.props.widgetGroups.map(widgetGroup => this.renderWidgetGroup(widgetGroup));\n    return createElement('div', {\n      className: 'fc-toolbar-chunk'\n    }, ...children);\n  }\n\n  renderWidgetGroup(widgetGroup) {\n    let {\n      props\n    } = this;\n    let {\n      theme\n    } = this.context;\n    let children = [];\n    let isOnlyButtons = true;\n\n    for (let widget of widgetGroup) {\n      let {\n        buttonName,\n        buttonClick,\n        buttonText,\n        buttonIcon,\n        buttonHint\n      } = widget;\n\n      if (buttonName === 'title') {\n        isOnlyButtons = false;\n        children.push(createElement(\"h2\", {\n          className: \"fc-toolbar-title\",\n          id: props.titleId\n        }, props.title));\n      } else {\n        let isPressed = buttonName === props.activeButton;\n        let isDisabled = !props.isTodayEnabled && buttonName === 'today' || !props.isPrevEnabled && buttonName === 'prev' || !props.isNextEnabled && buttonName === 'next';\n        let buttonClasses = [`fc-${buttonName}-button`, theme.getClass('button')];\n\n        if (isPressed) {\n          buttonClasses.push(theme.getClass('buttonActive'));\n        }\n\n        children.push(createElement(\"button\", {\n          type: \"button\",\n          title: typeof buttonHint === 'function' ? buttonHint(props.navUnit) : buttonHint,\n          disabled: isDisabled,\n          \"aria-pressed\": isPressed,\n          className: buttonClasses.join(' '),\n          onClick: buttonClick\n        }, buttonText || (buttonIcon ? createElement(\"span\", {\n          className: buttonIcon\n        }) : '')));\n      }\n    }\n\n    if (children.length > 1) {\n      let groupClassName = isOnlyButtons && theme.getClass('buttonGroup') || '';\n      return createElement('div', {\n        className: groupClassName\n      }, ...children);\n    }\n\n    return children[0];\n  }\n\n}\n\nclass Toolbar extends BaseComponent {\n  render() {\n    let {\n      model,\n      extraClassName\n    } = this.props;\n    let forceLtr = false;\n    let startContent;\n    let endContent;\n    let sectionWidgets = model.sectionWidgets;\n    let centerContent = sectionWidgets.center;\n\n    if (sectionWidgets.left) {\n      forceLtr = true;\n      startContent = sectionWidgets.left;\n    } else {\n      startContent = sectionWidgets.start;\n    }\n\n    if (sectionWidgets.right) {\n      forceLtr = true;\n      endContent = sectionWidgets.right;\n    } else {\n      endContent = sectionWidgets.end;\n    }\n\n    let classNames = [extraClassName || '', 'fc-toolbar', forceLtr ? 'fc-toolbar-ltr' : ''];\n    return createElement(\"div\", {\n      className: classNames.join(' ')\n    }, this.renderSection('start', startContent || []), this.renderSection('center', centerContent || []), this.renderSection('end', endContent || []));\n  }\n\n  renderSection(key, widgetGroups) {\n    let {\n      props\n    } = this;\n    return createElement(ToolbarSection, {\n      key: key,\n      widgetGroups: widgetGroups,\n      title: props.title,\n      navUnit: props.navUnit,\n      activeButton: props.activeButton,\n      isTodayEnabled: props.isTodayEnabled,\n      isPrevEnabled: props.isPrevEnabled,\n      isNextEnabled: props.isNextEnabled,\n      titleId: props.titleId\n    });\n  }\n\n} // TODO: do function component?\n\n\nclass ViewContainer extends BaseComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      availableWidth: null\n    };\n\n    this.handleEl = el => {\n      this.el = el;\n      setRef(this.props.elRef, el);\n      this.updateAvailableWidth();\n    };\n\n    this.handleResize = () => {\n      this.updateAvailableWidth();\n    };\n  }\n\n  render() {\n    let {\n      props,\n      state\n    } = this;\n    let {\n      aspectRatio\n    } = props;\n    let classNames = ['fc-view-harness', aspectRatio || props.liquid || props.height ? 'fc-view-harness-active' // harness controls the height\n    : 'fc-view-harness-passive' // let the view do the height\n    ];\n    let height = '';\n    let paddingBottom = '';\n\n    if (aspectRatio) {\n      if (state.availableWidth !== null) {\n        height = state.availableWidth / aspectRatio;\n      } else {\n        // while waiting to know availableWidth, we can't set height to *zero*\n        // because will cause lots of unnecessary scrollbars within scrollgrid.\n        // BETTER: don't start rendering ANYTHING yet until we know container width\n        // NOTE: why not always use paddingBottom? Causes height oscillation (issue 5606)\n        paddingBottom = `${1 / aspectRatio * 100}%`;\n      }\n    } else {\n      height = props.height || '';\n    }\n\n    return createElement(\"div\", {\n      \"aria-labelledby\": props.labeledById,\n      ref: this.handleEl,\n      className: classNames.join(' '),\n      style: {\n        height,\n        paddingBottom\n      }\n    }, props.children);\n  }\n\n  componentDidMount() {\n    this.context.addResizeHandler(this.handleResize);\n  }\n\n  componentWillUnmount() {\n    this.context.removeResizeHandler(this.handleResize);\n  }\n\n  updateAvailableWidth() {\n    if (this.el && // needed. but why?\n    this.props.aspectRatio // aspectRatio is the only height setting that needs availableWidth\n    ) {\n      this.setState({\n        availableWidth: this.el.offsetWidth\n      });\n    }\n  }\n\n}\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\n\n\nclass EventClicking extends Interaction {\n  constructor(settings) {\n    super(settings);\n\n    this.handleSegClick = (ev, segEl) => {\n      let {\n        component\n      } = this;\n      let {\n        context\n      } = component;\n      let seg = getElSeg(segEl);\n\n      if (seg && // might be the <div> surrounding the more link\n      component.isValidSegDownEl(ev.target)) {\n        // our way to simulate a link click for elements that can't be <a> tags\n        // grab before trigger fired in case trigger trashes DOM thru rerendering\n        let hasUrlContainer = elementClosest(ev.target, '.fc-event-forced-url');\n        let url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n        context.emitter.trigger('eventClick', {\n          el: segEl,\n          event: new EventImpl(component.context, seg.eventRange.def, seg.eventRange.instance),\n          jsEvent: ev,\n          view: context.viewApi\n        });\n\n        if (url && !ev.defaultPrevented) {\n          window.location.href = url;\n        }\n      }\n    };\n\n    this.destroy = listenBySelector(settings.el, 'click', '.fc-event', // on both fg and bg events\n    this.handleSegClick);\n  }\n\n}\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\n\n\nclass EventHovering extends Interaction {\n  constructor(settings) {\n    super(settings); // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n\n    this.handleEventElRemove = el => {\n      if (el === this.currentSegEl) {\n        this.handleSegLeave(null, this.currentSegEl);\n      }\n    };\n\n    this.handleSegEnter = (ev, segEl) => {\n      if (getElSeg(segEl)) {\n        // TODO: better way to make sure not hovering over more+ link or its wrapper\n        this.currentSegEl = segEl;\n        this.triggerEvent('eventMouseEnter', ev, segEl);\n      }\n    };\n\n    this.handleSegLeave = (ev, segEl) => {\n      if (this.currentSegEl) {\n        this.currentSegEl = null;\n        this.triggerEvent('eventMouseLeave', ev, segEl);\n      }\n    };\n\n    this.removeHoverListeners = listenToHoverBySelector(settings.el, '.fc-event', // on both fg and bg events\n    this.handleSegEnter, this.handleSegLeave);\n  }\n\n  destroy() {\n    this.removeHoverListeners();\n  }\n\n  triggerEvent(publicEvName, ev, segEl) {\n    let {\n      component\n    } = this;\n    let {\n      context\n    } = component;\n    let seg = getElSeg(segEl);\n\n    if (!ev || component.isValidSegDownEl(ev.target)) {\n      context.emitter.trigger(publicEvName, {\n        el: segEl,\n        event: new EventImpl(context, seg.eventRange.def, seg.eventRange.instance),\n        jsEvent: ev,\n        view: context.viewApi\n      });\n    }\n  }\n\n}\n\nclass CalendarContent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.buildViewContext = memoize(buildViewContext);\n    this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n    this.buildToolbarProps = memoize(buildToolbarProps);\n    this.headerRef = createRef();\n    this.footerRef = createRef();\n    this.interactionsStore = {}; // eslint-disable-next-line\n\n    this.state = {\n      viewLabelId: getUniqueDomId()\n    }; // Component Registration\n    // -----------------------------------------------------------------------------------------------------------------\n\n    this.registerInteractiveComponent = (component, settingsInput) => {\n      let settings = parseInteractionSettings(component, settingsInput);\n      let DEFAULT_INTERACTIONS = [EventClicking, EventHovering];\n      let interactionClasses = DEFAULT_INTERACTIONS.concat(this.props.pluginHooks.componentInteractions);\n      let interactions = interactionClasses.map(TheInteractionClass => new TheInteractionClass(settings));\n      this.interactionsStore[component.uid] = interactions;\n      interactionSettingsStore[component.uid] = settings;\n    };\n\n    this.unregisterInteractiveComponent = component => {\n      let listeners = this.interactionsStore[component.uid];\n\n      if (listeners) {\n        for (let listener of listeners) {\n          listener.destroy();\n        }\n\n        delete this.interactionsStore[component.uid];\n      }\n\n      delete interactionSettingsStore[component.uid];\n    }; // Resizing\n    // -----------------------------------------------------------------------------------------------------------------\n\n\n    this.resizeRunner = new DelayedRunner(() => {\n      this.props.emitter.trigger('_resize', true); // should window resizes be considered \"forced\" ?\n\n      this.props.emitter.trigger('windowResize', {\n        view: this.props.viewApi\n      });\n    });\n\n    this.handleWindowResize = ev => {\n      let {\n        options\n      } = this.props;\n\n      if (options.handleWindowResize && ev.target === window // avoid jqui events\n      ) {\n        this.resizeRunner.request(options.windowResizeDelay);\n      }\n    };\n  }\n  /*\n  renders INSIDE of an outer div\n  */\n\n\n  render() {\n    let {\n      props\n    } = this;\n    let {\n      toolbarConfig,\n      options\n    } = props;\n    let toolbarProps = this.buildToolbarProps(props.viewSpec, props.dateProfile, props.dateProfileGenerator, props.currentDate, getNow(props.options.now, props.dateEnv), // TODO: use NowTimer????\n    props.viewTitle);\n    let viewVGrow = false;\n    let viewHeight = '';\n    let viewAspectRatio;\n\n    if (props.isHeightAuto || props.forPrint) {\n      viewHeight = '';\n    } else if (options.height != null) {\n      viewVGrow = true;\n    } else if (options.contentHeight != null) {\n      viewHeight = options.contentHeight;\n    } else {\n      viewAspectRatio = Math.max(options.aspectRatio, 0.5); // prevent from getting too tall\n    }\n\n    let viewContext = this.buildViewContext(props.viewSpec, props.viewApi, props.options, props.dateProfileGenerator, props.dateEnv, props.theme, props.pluginHooks, props.dispatch, props.getCurrentData, props.emitter, props.calendarApi, this.registerInteractiveComponent, this.unregisterInteractiveComponent);\n    let viewLabelId = toolbarConfig.header && toolbarConfig.header.hasTitle ? this.state.viewLabelId : '';\n    return createElement(ViewContextType.Provider, {\n      value: viewContext\n    }, toolbarConfig.header && createElement(Toolbar, Object.assign({\n      ref: this.headerRef,\n      extraClassName: \"fc-header-toolbar\",\n      model: toolbarConfig.header,\n      titleId: viewLabelId\n    }, toolbarProps)), createElement(ViewContainer, {\n      liquid: viewVGrow,\n      height: viewHeight,\n      aspectRatio: viewAspectRatio,\n      labeledById: viewLabelId\n    }, this.renderView(props), this.buildAppendContent()), toolbarConfig.footer && createElement(Toolbar, Object.assign({\n      ref: this.footerRef,\n      extraClassName: \"fc-footer-toolbar\",\n      model: toolbarConfig.footer,\n      titleId: \"\"\n    }, toolbarProps)));\n  }\n\n  componentDidMount() {\n    let {\n      props\n    } = this;\n    this.calendarInteractions = props.pluginHooks.calendarInteractions.map(CalendarInteractionClass => new CalendarInteractionClass(props));\n    window.addEventListener('resize', this.handleWindowResize);\n    let {\n      propSetHandlers\n    } = props.pluginHooks;\n\n    for (let propName in propSetHandlers) {\n      propSetHandlers[propName](props[propName], props);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    let {\n      props\n    } = this;\n    let {\n      propSetHandlers\n    } = props.pluginHooks;\n\n    for (let propName in propSetHandlers) {\n      if (props[propName] !== prevProps[propName]) {\n        propSetHandlers[propName](props[propName], props);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleWindowResize);\n    this.resizeRunner.clear();\n\n    for (let interaction of this.calendarInteractions) {\n      interaction.destroy();\n    }\n\n    this.props.emitter.trigger('_unmount');\n  }\n\n  buildAppendContent() {\n    let {\n      props\n    } = this;\n    let children = props.pluginHooks.viewContainerAppends.map(buildAppendContent => buildAppendContent(props));\n    return createElement(Fragment, {}, ...children);\n  }\n\n  renderView(props) {\n    let {\n      pluginHooks\n    } = props;\n    let {\n      viewSpec\n    } = props;\n    let viewProps = {\n      dateProfile: props.dateProfile,\n      businessHours: props.businessHours,\n      eventStore: props.renderableEventStore,\n      eventUiBases: props.eventUiBases,\n      dateSelection: props.dateSelection,\n      eventSelection: props.eventSelection,\n      eventDrag: props.eventDrag,\n      eventResize: props.eventResize,\n      isHeightAuto: props.isHeightAuto,\n      forPrint: props.forPrint\n    };\n    let transformers = this.buildViewPropTransformers(pluginHooks.viewPropsTransformers);\n\n    for (let transformer of transformers) {\n      Object.assign(viewProps, transformer.transform(viewProps, props));\n    }\n\n    let ViewComponent = viewSpec.component;\n    return createElement(ViewComponent, Object.assign({}, viewProps));\n  }\n\n}\n\nfunction buildToolbarProps(viewSpec, dateProfile, dateProfileGenerator, currentDate, now, title) {\n  // don't force any date-profiles to valid date profiles (the `false`) so that we can tell if it's invalid\n  let todayInfo = dateProfileGenerator.build(now, undefined, false); // TODO: need `undefined` or else INFINITE LOOP for some reason\n\n  let prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate, false);\n  let nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate, false);\n  return {\n    title,\n    activeButton: viewSpec.type,\n    navUnit: viewSpec.singleUnit,\n    isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n    isPrevEnabled: prevInfo.isValid,\n    isNextEnabled: nextInfo.isValid\n  };\n} // Plugin\n// -----------------------------------------------------------------------------------------------------------------\n\n\nfunction buildViewPropTransformers(theClasses) {\n  return theClasses.map(TheClass => new TheClass());\n}\n\nclass Calendar extends CalendarImpl {\n  constructor(el, optionOverrides = {}) {\n    super();\n    this.isRendering = false;\n    this.isRendered = false;\n    this.currentClassNames = [];\n    this.customContentRenderId = 0;\n\n    this.handleAction = action => {\n      // actions we know we want to render immediately\n      switch (action.type) {\n        case 'SET_EVENT_DRAG':\n        case 'SET_EVENT_RESIZE':\n          this.renderRunner.tryDrain();\n      }\n    };\n\n    this.handleData = data => {\n      this.currentData = data;\n      this.renderRunner.request(data.calendarOptions.rerenderDelay);\n    };\n\n    this.handleRenderRequest = () => {\n      if (this.isRendering) {\n        this.isRendered = true;\n        let {\n          currentData\n        } = this;\n        flushSync(() => {\n          render(createElement(CalendarRoot, {\n            options: currentData.calendarOptions,\n            theme: currentData.theme,\n            emitter: currentData.emitter\n          }, (classNames, height, isHeightAuto, forPrint) => {\n            this.setClassNames(classNames);\n            this.setHeight(height);\n            return createElement(RenderId.Provider, {\n              value: this.customContentRenderId\n            }, createElement(CalendarContent, Object.assign({\n              isHeightAuto: isHeightAuto,\n              forPrint: forPrint\n            }, currentData)));\n          }), this.el);\n        });\n      } else if (this.isRendered) {\n        this.isRendered = false;\n        render(null, this.el);\n        this.setClassNames([]);\n        this.setHeight('');\n      }\n    };\n\n    this.el = el;\n    this.renderRunner = new DelayedRunner(this.handleRenderRequest);\n    new CalendarDataManager({\n      optionOverrides,\n      calendarApi: this,\n      onAction: this.handleAction,\n      onData: this.handleData\n    });\n  }\n\n  render() {\n    let wasRendering = this.isRendering;\n\n    if (!wasRendering) {\n      this.isRendering = true;\n    } else {\n      this.customContentRenderId += 1;\n    }\n\n    this.renderRunner.request();\n\n    if (wasRendering) {\n      this.updateSize();\n    }\n  }\n\n  destroy() {\n    if (this.isRendering) {\n      this.isRendering = false;\n      this.renderRunner.request();\n    }\n  }\n\n  updateSize() {\n    flushSync(() => {\n      super.updateSize();\n    });\n  }\n\n  batchRendering(func) {\n    this.renderRunner.pause('batchRendering');\n    func();\n    this.renderRunner.resume('batchRendering');\n  }\n\n  pauseRendering() {\n    this.renderRunner.pause('pauseRendering');\n  }\n\n  resumeRendering() {\n    this.renderRunner.resume('pauseRendering', true);\n  }\n\n  resetOptions(optionOverrides, append) {\n    this.currentDataManager.resetOptions(optionOverrides, append);\n  }\n\n  setClassNames(classNames) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      let {\n        classList\n      } = this.el;\n\n      for (let className of this.currentClassNames) {\n        classList.remove(className);\n      }\n\n      for (let className of classNames) {\n        classList.add(className);\n      }\n\n      this.currentClassNames = classNames;\n    }\n  }\n\n  setHeight(height) {\n    applyStyleProp(this.el, 'height', height);\n  }\n\n}\n\nfunction formatDate(dateInput, options = {}) {\n  let dateEnv = buildDateEnv(options);\n  let formatter = createFormatter(options);\n  let dateMeta = dateEnv.createMarkerMeta(dateInput);\n\n  if (!dateMeta) {\n    // TODO: warning?\n    return '';\n  }\n\n  return dateEnv.format(dateMeta.marker, formatter, {\n    forcedTzo: dateMeta.forcedTzo\n  });\n}\n\nfunction formatRange(startInput, endInput, options) {\n  let dateEnv = buildDateEnv(typeof options === 'object' && options ? options : {}); // pass in if non-null object\n\n  let formatter = createFormatter(options);\n  let startMeta = dateEnv.createMarkerMeta(startInput);\n  let endMeta = dateEnv.createMarkerMeta(endInput);\n\n  if (!startMeta || !endMeta) {\n    // TODO: warning?\n    return '';\n  }\n\n  return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n    forcedStartTzo: startMeta.forcedTzo,\n    forcedEndTzo: endMeta.forcedTzo,\n    isEndExclusive: options.isEndExclusive,\n    defaultSeparator: BASE_OPTION_DEFAULTS.defaultRangeSeparator\n  });\n} // TODO: more DRY and optimized\n\n\nfunction buildDateEnv(settings) {\n  let locale = buildLocale(settings.locale || 'en', organizeRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n\n  return new DateEnv(Object.assign(Object.assign({\n    timeZone: BASE_OPTION_DEFAULTS.timeZone,\n    calendarSystem: 'gregory'\n  }, settings), {\n    locale\n  }));\n} // HELPERS\n\n/*\nif nextDayThreshold is specified, slicing is done in an all-day fashion.\nyou can get nextDayThreshold from context.nextDayThreshold\n*/\n\n\nfunction sliceEvents(props, allDay) {\n  return sliceEventStore(props.eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? props.nextDayThreshold : null).fg;\n}\n\nconst version = '6.0.0';\nexport { Calendar, formatDate, formatRange, sliceEvents, version };","map":{"version":3,"names":["i","injectStyles","g","globalLocales","m","mergeProps","T","Theme","a","mapHash","V","ViewContextType","C","ContentContainer","b","buildViewClassNames","c","greatestDurationDenominator","d","createDuration","B","BASE_OPTION_DEFAULTS","f","formatWithOrdinals","D","DelayedRunner","e","createFormatter","h","diffWholeDays","j","memoize","k","buildBuildPluginHooks","l","memoizeObjArg","n","isPropsEqual","E","Emitter","o","getInitialDate","r","rangeContainsMarker","p","initEventSources","q","createEmptyEventStore","s","reduceCurrentDate","t","reduceEventSources","u","reduceEventStore","v","computeEventSourcesLoading","w","reduceEventSourcesNewTimeZone","x","rezoneEventStoreDates","y","mergeRawOptions","z","globalPlugins","A","BASE_OPTION_REFINERS","F","CALENDAR_LISTENER_REFINERS","G","CALENDAR_OPTION_REFINERS","H","COMPLEX_OPTION_COMPARATORS","I","VIEW_OPTION_REFINERS","J","DateEnv","K","DateProfileGenerator","L","createEventUi","M","parseBusinessHours","N","BaseComponent","O","setRef","P","Interaction","Q","getElSeg","R","elementClosest","S","EventImpl","U","listenBySelector","W","listenToHoverBySelector","X","PureComponent","Y","buildViewContext","Z","getUniqueDomId","_","parseInteractionSettings","$","interactionSettingsStore","a0","getNow","a1","CalendarImpl","a2","flushSync","a3","CalendarRoot","a4","RenderId","a5","isArraysEqual","a6","applyStyleProp","a7","sliceEventStore","a9","JsonRequestError","a8","createPlugin","createElement","createRef","Fragment","render","css_248z","MINIMAL_RAW_EN_LOCALE","code","week","dow","doy","direction","buttonText","prev","next","prevYear","nextYear","year","today","month","day","list","weekText","weekTextLong","closeHint","timeHint","eventHint","allDayText","moreLinkText","noEventsText","RAW_EN_LOCALE","Object","assign","buttonHints","unit","viewHint","navLinkHint","moreLinkHint","eventCnt","organizeRawLocales","explicitRawLocales","defaultCode","length","allRawLocales","concat","rawLocaleMap","en","rawLocale","map","buildLocale","inputSingular","available","Array","isArray","parseLocale","queryLocale","codeArg","codes","raw","queryRawLocale","parts","toLocaleLowerCase","split","simpleId","slice","join","merged","simpleNumberFormat","Intl","NumberFormat","options","StandardTheme","prototype","classes","root","tableCellShaded","buttonGroup","button","buttonActive","baseIconClass","iconClasses","close","rtlIconClasses","iconOverrideOption","iconOverrideCustomButtonOption","iconOverridePrefix","compileViewDefs","defaultConfigs","overrideConfigs","hash","viewType","ensureViewDef","viewDef","buildViewDef","defaultConfig","overrideConfig","queryProp","name","theComponent","superType","superDef","Error","component","type","defaults","rawOptions","overrides","parseViewConfigs","inputs","parseViewConfig","input","content","createViewHookComponent","viewProps","Consumer","context","elTag","elClasses","viewSpec","renderProps","nextDayThreshold","generatorName","undefined","generator","classNameGenerator","classNames","didMount","willUnmount","buildViewSpecs","defaultInputs","optionOverrides","dynamicOptionOverrides","localeDefaults","views","viewDefs","buildViewSpec","durationInput","duration","durationUnit","singleUnit","singleUnitOverrides","createDurationCached","denom","value","queryButtonText","optionsSubset","buttonTextMap","buttonTextKey","queryButtonTitle","buttonKey","optionDefaults","buttonTextOverride","buttonTextDefault","buttonTitleOverride","buttonHint","buttonTitleDefault","durationInputMap","json","JSON","stringify","res","reduceViewType","action","reduceDynamicOptionOverrides","optionName","rawOptionValue","reduceDateProfile","currentDateProfile","currentDate","dateProfileGenerator","dp","build","dateMarker","buildPrev","isValid","buildNext","reduceDateSelection","currentSelection","selection","reduceSelectedEvent","currentInstanceId","eventInstanceId","reduceEventDrag","currentDrag","newDrag","state","affectedEvents","mutatedEvents","isEvent","reduceEventResize","currentResize","newResize","parseToolbars","calendarOptions","calendarOptionOverrides","theme","viewSpecs","calendarApi","header","headerToolbar","parseToolbar","footer","footerToolbar","sectionStrHash","sectionWidgets","viewsWithButtons","hasTitle","sectionName","sectionStr","sectionRes","parseSection","widgets","push","isRtl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","calendarButtonHintOverrides","calendarButtonHints","sectionSubstrs","buttonGroupStr","buttonName","customButtonProps","buttonClick","buttonIcon","ev","click","call","target","getCustomButtonIconClass","getIconClass","text","hint","changeView","textFallback","prevOrNext","navUnit","ViewImpl","constructor","getCurrentData","dateEnv","calendar","title","viewTitle","activeStart","toDate","dateProfile","activeRange","start","activeEnd","end","currentStart","currentRange","currentEnd","getOption","TaskRunner","runTaskOption","drainedOption","queue","delayedRunner","drain","bind","request","task","delay","pause","scope","resume","force","completedTasks","shift","runTask","drained","buildTitle","viewOptions","range","test","currentRangeUnit","formatRange","titleFormat","buildTitleFormat","isEndExclusive","isRangeAllDay","defaultSeparator","titleRangeSeparator","days","CalendarDataManager","props","computeOptionsData","_computeOptionsData","computeCurrentViewData","_computeCurrentViewData","buildPluginHooks","buildDateEnv","buildDateEnv$1","buildTheme","buildDateProfileGenerator","buildViewApi","buildViewUiProps","buildEventUiBySource","buildEventUiBases","parseContextBusinessHours","emitter","actionRunner","_handleAction","updateData","currentCalendarOptionsInput","currentCalendarOptionsRefined","currentViewOptionsInput","currentViewOptionsRefined","currentCalendarOptionsRefiners","data","dispatch","optionsData","currentViewType","initialView","pluginHooks","currentViewData","currentDataManager","setThisContext","setOptions","calendarContext","callback","contextInit","eventSources","initialState","businessHours","eventUiBases","eventStore","renderableEventStore","dateSelection","eventSelection","eventDrag","eventResize","selectionConfig","contextAndState","reducer","reducers","computeIsLoading","trigger","resetOptions","append","isEventsLoading","progressiveEventRendering","eventUiSingleBase","eventUiBySource","defs","newState","wasLoading","isLoading","onAction","oldData","changeHandlers","optionChangeHandlers","oldCalendarOptions","newCalendarOptions","timeZone","onData","refinedOptions","availableLocaleData","extra","processRawCalendarOptions","warnUnknownOptions","locale","weekNumberCalculation","firstDay","defaultRangeSeparator","toolbarConfig","availableRawLocales","locales","plugins","refiners","listenerRefiners","optionRefiners","refined","currentRaw","currentRefined","anyChanges","processRawViewOptions","dateProfileGeneratorClass","usesMinMaxTime","slotMinTime","slotMaxTime","showNonCurrentDates","dayCount","dateAlignment","dateIncrement","hiddenDays","weekends","nowInput","now","validRangeInput","validRange","visibleRangeInput","visibleRange","monthMode","fixedWeekCount","viewApi","explicitLocale","calendarSystem","namedTimeZoneImpl","namedTimeZonedImpl","cmdFormatter","ThemeClass","themeClasses","themeSystem","DateProfileGeneratorClass","eventSource","ui","eventDefs","defId","def","sourceId","display","eventDisplay","editable","startEditable","eventStartEditable","durationEditable","eventDurationEditable","constraint","eventConstraint","overlap","eventOverlap","allow","eventAllow","backgroundColor","eventBackgroundColor","borderColor","eventBorderColor","textColor","eventTextColor","color","eventColor","selectConstraint","selectOverlap","selectAllow","isLoadingFunc","isLoadingFuncs","viewName","console","warn","ToolbarSection","children","widgetGroups","widgetGroup","renderWidgetGroup","className","isOnlyButtons","widget","id","titleId","isPressed","activeButton","isDisabled","isTodayEnabled","isPrevEnabled","isNextEnabled","buttonClasses","getClass","disabled","onClick","groupClassName","Toolbar","model","extraClassName","forceLtr","startContent","endContent","centerContent","center","left","right","renderSection","key","ViewContainer","arguments","availableWidth","handleEl","el","elRef","updateAvailableWidth","handleResize","aspectRatio","liquid","height","paddingBottom","labeledById","ref","style","componentDidMount","addResizeHandler","componentWillUnmount","removeResizeHandler","setState","offsetWidth","EventClicking","settings","handleSegClick","segEl","seg","isValidSegDownEl","hasUrlContainer","url","querySelector","href","event","eventRange","instance","jsEvent","view","defaultPrevented","window","location","destroy","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","publicEvName","CalendarContent","buildViewPropTransformers","buildToolbarProps","headerRef","footerRef","interactionsStore","viewLabelId","registerInteractiveComponent","settingsInput","DEFAULT_INTERACTIONS","interactionClasses","componentInteractions","interactions","TheInteractionClass","uid","unregisterInteractiveComponent","listeners","listener","resizeRunner","handleWindowResize","windowResizeDelay","toolbarProps","viewVGrow","viewHeight","viewAspectRatio","isHeightAuto","forPrint","contentHeight","Math","max","viewContext","Provider","renderView","buildAppendContent","calendarInteractions","CalendarInteractionClass","addEventListener","propSetHandlers","propName","componentDidUpdate","prevProps","removeEventListener","clear","interaction","viewContainerAppends","transformers","viewPropsTransformers","transformer","transform","ViewComponent","todayInfo","prevInfo","nextInfo","theClasses","TheClass","Calendar","isRendering","isRendered","currentClassNames","customContentRenderId","handleAction","renderRunner","tryDrain","handleData","currentData","rerenderDelay","handleRenderRequest","setClassNames","setHeight","wasRendering","updateSize","batchRendering","func","pauseRendering","resumeRendering","classList","remove","add","formatDate","dateInput","formatter","dateMeta","createMarkerMeta","format","marker","forcedTzo","startInput","endInput","startMeta","endMeta","forcedStartTzo","forcedEndTzo","sliceEvents","allDay","fg","version"],"sources":["/Users/lukacicak/calendar-app/node_modules/@fullcalendar/core/index.js"],"sourcesContent":["import { i as injectStyles, g as globalLocales, m as mergeProps, T as Theme, a as mapHash, V as ViewContextType, C as ContentContainer, b as buildViewClassNames, c as greatestDurationDenominator, d as createDuration, B as BASE_OPTION_DEFAULTS, f as formatWithOrdinals, D as DelayedRunner, e as createFormatter, h as diffWholeDays, j as memoize, k as buildBuildPluginHooks, l as memoizeObjArg, n as isPropsEqual, E as Emitter, o as getInitialDate, r as rangeContainsMarker, p as initEventSources, q as createEmptyEventStore, s as reduceCurrentDate, t as reduceEventSources, u as reduceEventStore, v as computeEventSourcesLoading, w as reduceEventSourcesNewTimeZone, x as rezoneEventStoreDates, y as mergeRawOptions, z as globalPlugins, A as BASE_OPTION_REFINERS, F as CALENDAR_LISTENER_REFINERS, G as CALENDAR_OPTION_REFINERS, H as COMPLEX_OPTION_COMPARATORS, I as VIEW_OPTION_REFINERS, J as DateEnv, K as DateProfileGenerator, L as createEventUi, M as parseBusinessHours, N as BaseComponent, O as setRef, P as Interaction, Q as getElSeg, R as elementClosest, S as EventImpl, U as listenBySelector, W as listenToHoverBySelector, X as PureComponent, Y as buildViewContext, Z as getUniqueDomId, _ as parseInteractionSettings, $ as interactionSettingsStore, a0 as getNow, a1 as CalendarImpl, a2 as flushSync, a3 as CalendarRoot, a4 as RenderId, a5 as isArraysEqual, a6 as applyStyleProp, a7 as sliceEventStore } from './internal-common.js';\nexport { a9 as JsonRequestError, a8 as createPlugin } from './internal-common.js';\nimport { createElement, createRef, Fragment, render } from 'preact';\nimport 'preact/compat';\n\nvar css_248z = \":root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc-unselectable{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:none;user-select:none}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url(\\\"data:application/x-font-ttf;charset=utf-8;base64,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\\\") format(\\\"truetype\\\")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:\\\"\\\\e900\\\"}.fc-icon-chevron-right:before{content:\\\"\\\\e901\\\"}.fc-icon-chevrons-left:before{content:\\\"\\\\e902\\\"}.fc-icon-chevrons-right:before{content:\\\"\\\\e903\\\"}.fc-icon-minus-square:before{content:\\\"\\\\e904\\\"}.fc-icon-plus-square:before{content:\\\"\\\\e905\\\"}.fc-icon-x:before{content:\\\"\\\\e906\\\"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button::-moz-focus-inner{border-style:none;padding:0}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:\\\"\\\";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:\\\"\\\";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:\\\"\\\";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}\";\ninjectStyles(css_248z);\n\nconst MINIMAL_RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4, // 4 days need to be within the year to be considered the first week\n    },\n    direction: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list',\n    },\n    weekText: 'W',\n    weekTextLong: 'Week',\n    closeHint: 'Close',\n    timeHint: 'Time',\n    eventHint: 'Event',\n    allDayText: 'all-day',\n    moreLinkText: 'more',\n    noEventsText: 'No events to display',\n};\nconst RAW_EN_LOCALE = Object.assign(Object.assign({}, MINIMAL_RAW_EN_LOCALE), { \n    // Includes things we don't want other locales to inherit,\n    // things that derive from other translatable strings.\n    buttonHints: {\n        prev: 'Previous $0',\n        next: 'Next $0',\n        today(buttonText, unit) {\n            return (unit === 'day')\n                ? 'Today'\n                : `This ${buttonText}`;\n        },\n    }, viewHint: '$0 view', navLinkHint: 'Go to $0', moreLinkHint(eventCnt) {\n        return `Show ${eventCnt} more event${eventCnt === 1 ? '' : 's'}`;\n    } });\nfunction organizeRawLocales(explicitRawLocales) {\n    let defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    let allRawLocales = globalLocales.concat(explicitRawLocales);\n    let rawLocaleMap = {\n        en: RAW_EN_LOCALE,\n    };\n    for (let rawLocale of allRawLocales) {\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode,\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    return queryLocale(inputSingular, available);\n}\nfunction queryLocale(codeArg, available) {\n    let codes = [].concat(codeArg || []); // will convert to array\n    let raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (let i = 0; i < codes.length; i += 1) {\n        let parts = codes[i].toLocaleLowerCase().split('-');\n        for (let j = parts.length; j > 0; j -= 1) {\n            let simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    let merged = mergeProps([MINIMAL_RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    let { week } = merged;\n    delete merged.week;\n    return {\n        codeArg,\n        codes,\n        week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged,\n    };\n}\n\nclass StandardTheme extends Theme {\n}\nStandardTheme.prototype.classes = {\n    root: 'fc-theme-standard',\n    tableCellShaded: 'fc-cell-shaded',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right',\n};\nStandardTheme.prototype.rtlIconClasses = {\n    prev: 'fc-icon-chevron-right',\n    next: 'fc-icon-chevron-left',\n    prevYear: 'fc-icon-chevrons-right',\n    nextYear: 'fc-icon-chevrons-left',\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons'; // TODO: make TS-friendly\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    let hash = {};\n    let viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    let viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    let defaultConfig = defaultConfigs[viewType];\n    let overrideConfig = overrideConfigs[viewType];\n    let queryProp = (name) => ((defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n        ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null));\n    let theComponent = queryProp('component');\n    let superType = queryProp('superType');\n    let superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theComponent && superDef) {\n        theComponent = superDef.component;\n    }\n    if (!theComponent) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        component: theComponent,\n        defaults: Object.assign(Object.assign({}, (superDef ? superDef.defaults : {})), (defaultConfig ? defaultConfig.rawOptions : {})),\n        overrides: Object.assign(Object.assign({}, (superDef ? superDef.overrides : {})), (overrideConfig ? overrideConfig.rawOptions : {})),\n    };\n}\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nfunction parseViewConfig(input) {\n    let rawOptions = typeof input === 'function' ?\n        { component: input } :\n        input;\n    let { component } = rawOptions;\n    if (rawOptions.content) {\n        component = createViewHookComponent(rawOptions);\n        // TODO: remove content/classNames/didMount/etc from options?\n    }\n    return {\n        superType: rawOptions.type,\n        component: component,\n        rawOptions, // includes type and component too :(\n    };\n}\nfunction createViewHookComponent(options) {\n    return (viewProps) => (createElement(ViewContextType.Consumer, null, (context) => (createElement(ContentContainer, { elTag: \"div\", elClasses: buildViewClassNames(context.viewSpec), renderProps: Object.assign(Object.assign({}, viewProps), { nextDayThreshold: context.options.nextDayThreshold }), generatorName: undefined, generator: options.content, classNameGenerator: options.classNames, didMount: options.didMount, willUnmount: options.willUnmount }))));\n}\n\nfunction buildViewSpecs(defaultInputs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n    let defaultConfigs = parseViewConfigs(defaultInputs);\n    let overrideConfigs = parseViewConfigs(optionOverrides.views);\n    let viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, (viewDef) => buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults));\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n    let durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        dynamicOptionOverrides.duration ||\n        optionOverrides.duration;\n    let duration = null;\n    let durationUnit = '';\n    let singleUnit = '';\n    let singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDurationCached(durationInput);\n        if (duration) { // valid?\n            let denom = greatestDurationDenominator(duration);\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].rawOptions : {};\n            }\n        }\n    }\n    let queryButtonText = (optionsSubset) => {\n        let buttonTextMap = optionsSubset.buttonText || {};\n        let buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n        return null;\n    };\n    let queryButtonTitle = (optionsSubset) => {\n        let buttonHints = optionsSubset.buttonHints || {};\n        let buttonKey = viewDef.defaults.buttonTextKey; // use same key as text\n        if (buttonKey != null && buttonHints[buttonKey] != null) {\n            return buttonHints[buttonKey];\n        }\n        if (buttonHints[viewDef.type] != null) {\n            return buttonHints[viewDef.type];\n        }\n        if (buttonHints[singleUnit] != null) {\n            return buttonHints[singleUnit];\n        }\n        return null;\n    };\n    return {\n        type: viewDef.type,\n        component: viewDef.component,\n        duration,\n        durationUnit,\n        singleUnit,\n        optionDefaults: viewDef.defaults,\n        optionOverrides: Object.assign(Object.assign({}, singleUnitOverrides), viewDef.overrides),\n        buttonTextOverride: queryButtonText(dynamicOptionOverrides) ||\n            queryButtonText(optionOverrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(localeDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(BASE_OPTION_DEFAULTS) ||\n            viewDef.type,\n        // not DRY\n        buttonTitleOverride: queryButtonTitle(dynamicOptionOverrides) ||\n            queryButtonTitle(optionOverrides) ||\n            viewDef.overrides.buttonHint,\n        buttonTitleDefault: queryButtonTitle(localeDefaults) ||\n            viewDef.defaults.buttonHint ||\n            queryButtonTitle(BASE_OPTION_DEFAULTS),\n        // will eventually fall back to buttonText\n    };\n}\n// hack to get memoization working\nlet durationInputMap = {};\nfunction createDurationCached(durationInput) {\n    let json = JSON.stringify(durationInput);\n    let res = durationInputMap[json];\n    if (res === undefined) {\n        res = createDuration(durationInput);\n        durationInputMap[json] = res;\n    }\n    return res;\n}\n\nfunction reduceViewType(viewType, action) {\n    switch (action.type) {\n        case 'CHANGE_VIEW_TYPE':\n            viewType = action.viewType;\n    }\n    return viewType;\n}\n\nfunction reduceDynamicOptionOverrides(dynamicOptionOverrides, action) {\n    switch (action.type) {\n        case 'SET_OPTION':\n            return Object.assign(Object.assign({}, dynamicOptionOverrides), { [action.optionName]: action.rawOptionValue });\n        default:\n            return dynamicOptionOverrides;\n    }\n}\n\nfunction reduceDateProfile(currentDateProfile, action, currentDate, dateProfileGenerator) {\n    let dp;\n    switch (action.type) {\n        case 'CHANGE_VIEW_TYPE':\n            return dateProfileGenerator.build(action.dateMarker || currentDate);\n        case 'CHANGE_DATE':\n            return dateProfileGenerator.build(action.dateMarker);\n        case 'PREV':\n            dp = dateProfileGenerator.buildPrev(currentDateProfile, currentDate);\n            if (dp.isValid) {\n                return dp;\n            }\n            break;\n        case 'NEXT':\n            dp = dateProfileGenerator.buildNext(currentDateProfile, currentDate);\n            if (dp.isValid) {\n                return dp;\n            }\n            break;\n    }\n    return currentDateProfile;\n}\n\nfunction reduceDateSelection(currentSelection, action) {\n    switch (action.type) {\n        case 'UNSELECT_DATES':\n            return null;\n        case 'SELECT_DATES':\n            return action.selection;\n        default:\n            return currentSelection;\n    }\n}\n\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'UNSELECT_EVENT':\n            return '';\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        default:\n            return currentInstanceId;\n    }\n}\n\nfunction reduceEventDrag(currentDrag, action) {\n    let newDrag;\n    switch (action.type) {\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        case 'SET_EVENT_DRAG':\n            newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n            };\n        default:\n            return currentDrag;\n    }\n}\n\nfunction reduceEventResize(currentResize, action) {\n    let newResize;\n    switch (action.type) {\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        case 'SET_EVENT_RESIZE':\n            newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n            };\n        default:\n            return currentResize;\n    }\n}\n\nfunction parseToolbars(calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n    let header = calendarOptions.headerToolbar ? parseToolbar(calendarOptions.headerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n    let footer = calendarOptions.footerToolbar ? parseToolbar(calendarOptions.footerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n    return { header, footer };\n}\nfunction parseToolbar(sectionStrHash, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n    let sectionWidgets = {};\n    let viewsWithButtons = [];\n    let hasTitle = false;\n    for (let sectionName in sectionStrHash) {\n        let sectionStr = sectionStrHash[sectionName];\n        let sectionRes = parseSection(sectionStr, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi);\n        sectionWidgets[sectionName] = sectionRes.widgets;\n        viewsWithButtons.push(...sectionRes.viewsWithButtons);\n        hasTitle = hasTitle || sectionRes.hasTitle;\n    }\n    return { sectionWidgets, viewsWithButtons, hasTitle };\n}\n/*\nBAD: querying icons and text here. should be done at render time\n*/\nfunction parseSection(sectionStr, calendarOptions, // defaults+overrides, then refined\ncalendarOptionOverrides, // overrides only!, unrefined :(\ntheme, viewSpecs, calendarApi) {\n    let isRtl = calendarOptions.direction === 'rtl';\n    let calendarCustomButtons = calendarOptions.customButtons || {};\n    let calendarButtonTextOverrides = calendarOptionOverrides.buttonText || {};\n    let calendarButtonText = calendarOptions.buttonText || {};\n    let calendarButtonHintOverrides = calendarOptionOverrides.buttonHints || {};\n    let calendarButtonHints = calendarOptions.buttonHints || {};\n    let sectionSubstrs = sectionStr ? sectionStr.split(' ') : [];\n    let viewsWithButtons = [];\n    let hasTitle = false;\n    let widgets = sectionSubstrs.map((buttonGroupStr) => (buttonGroupStr.split(',').map((buttonName) => {\n        if (buttonName === 'title') {\n            hasTitle = true;\n            return { buttonName };\n        }\n        let customButtonProps;\n        let viewSpec;\n        let buttonClick;\n        let buttonIcon; // only one of these will be set\n        let buttonText; // \"\n        let buttonHint;\n        // ^ for the title=\"\" attribute, for accessibility\n        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n            buttonClick = (ev) => {\n                if (customButtonProps.click) {\n                    customButtonProps.click.call(ev.target, ev, ev.target); // TODO: use Calendar this context?\n                }\n            };\n            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = customButtonProps.text);\n            buttonHint = customButtonProps.hint || customButtonProps.text;\n        }\n        else if ((viewSpec = viewSpecs[buttonName])) {\n            viewsWithButtons.push(buttonName);\n            buttonClick = () => {\n                calendarApi.changeView(buttonName);\n            };\n            (buttonText = viewSpec.buttonTextOverride) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = viewSpec.buttonTextDefault);\n            let textFallback = viewSpec.buttonTextOverride ||\n                viewSpec.buttonTextDefault;\n            buttonHint = formatWithOrdinals(viewSpec.buttonTitleOverride ||\n                viewSpec.buttonTitleDefault ||\n                calendarOptions.viewHint, [textFallback, buttonName], // view-name = buttonName\n            textFallback);\n        }\n        else if (calendarApi[buttonName]) { // a calendarApi method\n            buttonClick = () => {\n                calendarApi[buttonName]();\n            };\n            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = calendarButtonText[buttonName]); // everything else is considered default\n            if (buttonName === 'prevYear' || buttonName === 'nextYear') {\n                let prevOrNext = buttonName === 'prevYear' ? 'prev' : 'next';\n                buttonHint = formatWithOrdinals(calendarButtonHintOverrides[prevOrNext] ||\n                    calendarButtonHints[prevOrNext], [\n                    calendarButtonText.year || 'year',\n                    'year',\n                ], calendarButtonText[buttonName]);\n            }\n            else {\n                buttonHint = (navUnit) => formatWithOrdinals(calendarButtonHintOverrides[buttonName] ||\n                    calendarButtonHints[buttonName], [\n                    calendarButtonText[navUnit] || navUnit,\n                    navUnit,\n                ], calendarButtonText[buttonName]);\n            }\n        }\n        return { buttonName, buttonClick, buttonIcon, buttonText, buttonHint };\n    })));\n    return { widgets, viewsWithButtons, hasTitle };\n}\n\n// always represents the current view. otherwise, it'd need to change value every time date changes\nclass ViewImpl {\n    constructor(type, getCurrentData, dateEnv) {\n        this.type = type;\n        this.getCurrentData = getCurrentData;\n        this.dateEnv = dateEnv;\n    }\n    get calendar() {\n        return this.getCurrentData().calendarApi;\n    }\n    get title() {\n        return this.getCurrentData().viewTitle;\n    }\n    get activeStart() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start);\n    }\n    get activeEnd() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end);\n    }\n    get currentStart() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start);\n    }\n    get currentEnd() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end);\n    }\n    getOption(name) {\n        return this.getCurrentData().options[name]; // are the view-specific options\n    }\n}\n\nclass TaskRunner {\n    constructor(runTaskOption, drainedOption) {\n        this.runTaskOption = runTaskOption;\n        this.drainedOption = drainedOption;\n        this.queue = [];\n        this.delayedRunner = new DelayedRunner(this.drain.bind(this));\n    }\n    request(task, delay) {\n        this.queue.push(task);\n        this.delayedRunner.request(delay);\n    }\n    pause(scope) {\n        this.delayedRunner.pause(scope);\n    }\n    resume(scope, force) {\n        this.delayedRunner.resume(scope, force);\n    }\n    drain() {\n        let { queue } = this;\n        while (queue.length) {\n            let completedTasks = [];\n            let task;\n            while ((task = queue.shift())) {\n                this.runTask(task);\n                completedTasks.push(task);\n            }\n            this.drained(completedTasks);\n        } // keep going, in case new tasks were added in the drained handler\n    }\n    runTask(task) {\n        if (this.runTaskOption) {\n            this.runTaskOption(task);\n        }\n    }\n    drained(completedTasks) {\n        if (this.drainedOption) {\n            this.drainedOption(completedTasks);\n        }\n    }\n}\n\n// Computes what the title at the top of the calendarApi should be for this view\nfunction buildTitle(dateProfile, viewOptions, dateEnv) {\n    let range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || buildTitleFormat(dateProfile)), {\n        isEndExclusive: dateProfile.isRangeAllDay,\n        defaultSeparator: viewOptions.titleRangeSeparator,\n    });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction buildTitleFormat(dateProfile) {\n    let { currentRangeUnit } = dateProfile;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    let days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n    if (days !== null && days > 1) {\n        // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n        return { year: 'numeric', month: 'short', day: 'numeric' };\n    }\n    // one day. longer, like \"September 9 2014\"\n    return { year: 'numeric', month: 'long', day: 'numeric' };\n}\n\n// in future refactor, do the redux-style function(state=initial) for initial-state\n// also, whatever is happening in constructor, have it happen in action queue too\nclass CalendarDataManager {\n    constructor(props) {\n        this.computeOptionsData = memoize(this._computeOptionsData);\n        this.computeCurrentViewData = memoize(this._computeCurrentViewData);\n        this.organizeRawLocales = memoize(organizeRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildPluginHooks = buildBuildPluginHooks();\n        this.buildDateEnv = memoize(buildDateEnv$1);\n        this.buildTheme = memoize(buildTheme);\n        this.parseToolbars = memoize(parseToolbars);\n        this.buildViewSpecs = memoize(buildViewSpecs);\n        this.buildDateProfileGenerator = memoizeObjArg(buildDateProfileGenerator);\n        this.buildViewApi = memoize(buildViewApi);\n        this.buildViewUiProps = memoizeObjArg(buildViewUiProps);\n        this.buildEventUiBySource = memoize(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.parseContextBusinessHours = memoizeObjArg(parseContextBusinessHours);\n        this.buildTitle = memoize(buildTitle);\n        this.emitter = new Emitter();\n        this.actionRunner = new TaskRunner(this._handleAction.bind(this), this.updateData.bind(this));\n        this.currentCalendarOptionsInput = {};\n        this.currentCalendarOptionsRefined = {};\n        this.currentViewOptionsInput = {};\n        this.currentViewOptionsRefined = {};\n        this.currentCalendarOptionsRefiners = {};\n        this.getCurrentData = () => this.data;\n        this.dispatch = (action) => {\n            this.actionRunner.request(action); // protects against recursive calls to _handleAction\n        };\n        this.props = props;\n        this.actionRunner.pause();\n        let dynamicOptionOverrides = {};\n        let optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n        let currentViewType = optionsData.calendarOptions.initialView || optionsData.pluginHooks.initialView;\n        let currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n        // wire things up\n        // TODO: not DRY\n        props.calendarApi.currentDataManager = this;\n        this.emitter.setThisContext(props.calendarApi);\n        this.emitter.setOptions(currentViewData.options);\n        let currentDate = getInitialDate(optionsData.calendarOptions, optionsData.dateEnv);\n        let dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n        if (!rangeContainsMarker(dateProfile.activeRange, currentDate)) {\n            currentDate = dateProfile.currentRange.start;\n        }\n        let calendarContext = {\n            dateEnv: optionsData.dateEnv,\n            options: optionsData.calendarOptions,\n            pluginHooks: optionsData.pluginHooks,\n            calendarApi: props.calendarApi,\n            dispatch: this.dispatch,\n            emitter: this.emitter,\n            getCurrentData: this.getCurrentData,\n        };\n        // needs to be after setThisContext\n        for (let callback of optionsData.pluginHooks.contextInit) {\n            callback(calendarContext);\n        }\n        // NOT DRY\n        let eventSources = initEventSources(optionsData.calendarOptions, dateProfile, calendarContext);\n        let initialState = {\n            dynamicOptionOverrides,\n            currentViewType,\n            currentDate,\n            dateProfile,\n            businessHours: this.parseContextBusinessHours(calendarContext),\n            eventSources,\n            eventUiBases: {},\n            eventStore: createEmptyEventStore(),\n            renderableEventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null,\n            selectionConfig: this.buildViewUiProps(calendarContext).selectionConfig,\n        };\n        let contextAndState = Object.assign(Object.assign({}, calendarContext), initialState);\n        for (let reducer of optionsData.pluginHooks.reducers) {\n            Object.assign(initialState, reducer(null, null, contextAndState));\n        }\n        if (computeIsLoading(initialState, calendarContext)) {\n            this.emitter.trigger('loading', true); // NOT DRY\n        }\n        this.state = initialState;\n        this.updateData();\n        this.actionRunner.resume();\n    }\n    resetOptions(optionOverrides, append) {\n        let { props } = this;\n        props.optionOverrides = append\n            ? Object.assign(Object.assign({}, props.optionOverrides), optionOverrides) : optionOverrides;\n        this.actionRunner.request({\n            type: 'NOTHING',\n        });\n    }\n    _handleAction(action) {\n        let { props, state, emitter } = this;\n        let dynamicOptionOverrides = reduceDynamicOptionOverrides(state.dynamicOptionOverrides, action);\n        let optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n        let currentViewType = reduceViewType(state.currentViewType, action);\n        let currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n        // wire things up\n        // TODO: not DRY\n        props.calendarApi.currentDataManager = this;\n        emitter.setThisContext(props.calendarApi);\n        emitter.setOptions(currentViewData.options);\n        let calendarContext = {\n            dateEnv: optionsData.dateEnv,\n            options: optionsData.calendarOptions,\n            pluginHooks: optionsData.pluginHooks,\n            calendarApi: props.calendarApi,\n            dispatch: this.dispatch,\n            emitter,\n            getCurrentData: this.getCurrentData,\n        };\n        let { currentDate, dateProfile } = state;\n        if (this.data && this.data.dateProfileGenerator !== currentViewData.dateProfileGenerator) { // hack\n            dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n        }\n        currentDate = reduceCurrentDate(currentDate, action);\n        dateProfile = reduceDateProfile(dateProfile, action, currentDate, currentViewData.dateProfileGenerator);\n        if (action.type === 'PREV' || // TODO: move this logic into DateProfileGenerator\n            action.type === 'NEXT' || // \"\n            !rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n            currentDate = dateProfile.currentRange.start;\n        }\n        let eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendarContext);\n        let eventStore = reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendarContext);\n        let isEventsLoading = computeEventSourcesLoading(eventSources); // BAD. also called in this func in computeIsLoading\n        let renderableEventStore = (isEventsLoading && !currentViewData.options.progressiveEventRendering) ?\n            (state.renderableEventStore || eventStore) : // try from previous state\n            eventStore;\n        let { eventUiSingleBase, selectionConfig } = this.buildViewUiProps(calendarContext); // will memoize obj\n        let eventUiBySource = this.buildEventUiBySource(eventSources);\n        let eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        let newState = {\n            dynamicOptionOverrides,\n            currentViewType,\n            currentDate,\n            dateProfile,\n            eventSources,\n            eventStore,\n            renderableEventStore,\n            selectionConfig,\n            eventUiBases,\n            businessHours: this.parseContextBusinessHours(calendarContext),\n            dateSelection: reduceDateSelection(state.dateSelection, action),\n            eventSelection: reduceSelectedEvent(state.eventSelection, action),\n            eventDrag: reduceEventDrag(state.eventDrag, action),\n            eventResize: reduceEventResize(state.eventResize, action),\n        };\n        let contextAndState = Object.assign(Object.assign({}, calendarContext), newState);\n        for (let reducer of optionsData.pluginHooks.reducers) {\n            Object.assign(newState, reducer(state, action, contextAndState)); // give the OLD state, for old value\n        }\n        let wasLoading = computeIsLoading(state, calendarContext);\n        let isLoading = computeIsLoading(newState, calendarContext);\n        // TODO: use propSetHandlers in plugin system\n        if (!wasLoading && isLoading) {\n            emitter.trigger('loading', true);\n        }\n        else if (wasLoading && !isLoading) {\n            emitter.trigger('loading', false);\n        }\n        this.state = newState;\n        if (props.onAction) {\n            props.onAction(action);\n        }\n    }\n    updateData() {\n        let { props, state } = this;\n        let oldData = this.data;\n        let optionsData = this.computeOptionsData(props.optionOverrides, state.dynamicOptionOverrides, props.calendarApi);\n        let currentViewData = this.computeCurrentViewData(state.currentViewType, optionsData, props.optionOverrides, state.dynamicOptionOverrides);\n        let data = this.data = Object.assign(Object.assign(Object.assign({ viewTitle: this.buildTitle(state.dateProfile, currentViewData.options, optionsData.dateEnv), calendarApi: props.calendarApi, dispatch: this.dispatch, emitter: this.emitter, getCurrentData: this.getCurrentData }, optionsData), currentViewData), state);\n        let changeHandlers = optionsData.pluginHooks.optionChangeHandlers;\n        let oldCalendarOptions = oldData && oldData.calendarOptions;\n        let newCalendarOptions = optionsData.calendarOptions;\n        if (oldCalendarOptions && oldCalendarOptions !== newCalendarOptions) {\n            if (oldCalendarOptions.timeZone !== newCalendarOptions.timeZone) {\n                // hack\n                state.eventSources = data.eventSources = reduceEventSourcesNewTimeZone(data.eventSources, state.dateProfile, data);\n                state.eventStore = data.eventStore = rezoneEventStoreDates(data.eventStore, oldData.dateEnv, data.dateEnv);\n            }\n            for (let optionName in changeHandlers) {\n                if (oldCalendarOptions[optionName] !== newCalendarOptions[optionName]) {\n                    changeHandlers[optionName](newCalendarOptions[optionName], data);\n                }\n            }\n        }\n        if (props.onData) {\n            props.onData(data);\n        }\n    }\n    _computeOptionsData(optionOverrides, dynamicOptionOverrides, calendarApi) {\n        // TODO: blacklist options that are handled by optionChangeHandlers\n        let { refinedOptions, pluginHooks, localeDefaults, availableLocaleData, extra, } = this.processRawCalendarOptions(optionOverrides, dynamicOptionOverrides);\n        warnUnknownOptions(extra);\n        let dateEnv = this.buildDateEnv(refinedOptions.timeZone, refinedOptions.locale, refinedOptions.weekNumberCalculation, refinedOptions.firstDay, refinedOptions.weekText, pluginHooks, availableLocaleData, refinedOptions.defaultRangeSeparator);\n        let viewSpecs = this.buildViewSpecs(pluginHooks.views, optionOverrides, dynamicOptionOverrides, localeDefaults);\n        let theme = this.buildTheme(refinedOptions, pluginHooks);\n        let toolbarConfig = this.parseToolbars(refinedOptions, optionOverrides, theme, viewSpecs, calendarApi);\n        return {\n            calendarOptions: refinedOptions,\n            pluginHooks,\n            dateEnv,\n            viewSpecs,\n            theme,\n            toolbarConfig,\n            localeDefaults,\n            availableRawLocales: availableLocaleData.map,\n        };\n    }\n    // always called from behind a memoizer\n    processRawCalendarOptions(optionOverrides, dynamicOptionOverrides) {\n        let { locales, locale } = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        let availableLocaleData = this.organizeRawLocales(locales);\n        let availableRawLocales = availableLocaleData.map;\n        let localeDefaults = this.buildLocale(locale || availableLocaleData.defaultCode, availableRawLocales).options;\n        let pluginHooks = this.buildPluginHooks(optionOverrides.plugins || [], globalPlugins);\n        let refiners = this.currentCalendarOptionsRefiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n        let extra = {};\n        let raw = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            localeDefaults,\n            optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        let refined = {};\n        let currentRaw = this.currentCalendarOptionsInput;\n        let currentRefined = this.currentCalendarOptionsRefined;\n        let anyChanges = false;\n        for (let optionName in raw) {\n            if (optionName !== 'plugins') { // because plugins is special-cased\n                if (raw[optionName] === currentRaw[optionName] ||\n                    (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                        (optionName in currentRaw) &&\n                        COMPLEX_OPTION_COMPARATORS[optionName](currentRaw[optionName], raw[optionName]))) {\n                    refined[optionName] = currentRefined[optionName];\n                }\n                else if (refiners[optionName]) {\n                    refined[optionName] = refiners[optionName](raw[optionName]);\n                    anyChanges = true;\n                }\n                else {\n                    extra[optionName] = currentRaw[optionName];\n                }\n            }\n        }\n        if (anyChanges) {\n            this.currentCalendarOptionsInput = raw;\n            this.currentCalendarOptionsRefined = refined;\n        }\n        return {\n            rawOptions: this.currentCalendarOptionsInput,\n            refinedOptions: this.currentCalendarOptionsRefined,\n            pluginHooks,\n            availableLocaleData,\n            localeDefaults,\n            extra,\n        };\n    }\n    _computeCurrentViewData(viewType, optionsData, optionOverrides, dynamicOptionOverrides) {\n        let viewSpec = optionsData.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(`viewType \"${viewType}\" is not available. Please make sure you've loaded all neccessary plugins`);\n        }\n        let { refinedOptions, extra } = this.processRawViewOptions(viewSpec, optionsData.pluginHooks, optionsData.localeDefaults, optionOverrides, dynamicOptionOverrides);\n        warnUnknownOptions(extra);\n        let dateProfileGenerator = this.buildDateProfileGenerator({\n            dateProfileGeneratorClass: viewSpec.optionDefaults.dateProfileGeneratorClass,\n            duration: viewSpec.duration,\n            durationUnit: viewSpec.durationUnit,\n            usesMinMaxTime: viewSpec.optionDefaults.usesMinMaxTime,\n            dateEnv: optionsData.dateEnv,\n            calendarApi: this.props.calendarApi,\n            slotMinTime: refinedOptions.slotMinTime,\n            slotMaxTime: refinedOptions.slotMaxTime,\n            showNonCurrentDates: refinedOptions.showNonCurrentDates,\n            dayCount: refinedOptions.dayCount,\n            dateAlignment: refinedOptions.dateAlignment,\n            dateIncrement: refinedOptions.dateIncrement,\n            hiddenDays: refinedOptions.hiddenDays,\n            weekends: refinedOptions.weekends,\n            nowInput: refinedOptions.now,\n            validRangeInput: refinedOptions.validRange,\n            visibleRangeInput: refinedOptions.visibleRange,\n            monthMode: refinedOptions.monthMode,\n            fixedWeekCount: refinedOptions.fixedWeekCount,\n        });\n        let viewApi = this.buildViewApi(viewType, this.getCurrentData, optionsData.dateEnv);\n        return { viewSpec, options: refinedOptions, dateProfileGenerator, viewApi };\n    }\n    processRawViewOptions(viewSpec, pluginHooks, localeDefaults, optionOverrides, dynamicOptionOverrides) {\n        let raw = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            viewSpec.optionDefaults,\n            localeDefaults,\n            optionOverrides,\n            viewSpec.optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        let refiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), VIEW_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n        let refined = {};\n        let currentRaw = this.currentViewOptionsInput;\n        let currentRefined = this.currentViewOptionsRefined;\n        let anyChanges = false;\n        let extra = {};\n        for (let optionName in raw) {\n            if (raw[optionName] === currentRaw[optionName] ||\n                (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                    COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], currentRaw[optionName]))) {\n                refined[optionName] = currentRefined[optionName];\n            }\n            else {\n                if (raw[optionName] === this.currentCalendarOptionsInput[optionName] ||\n                    (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                        COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], this.currentCalendarOptionsInput[optionName]))) {\n                    if (optionName in this.currentCalendarOptionsRefined) { // might be an \"extra\" prop\n                        refined[optionName] = this.currentCalendarOptionsRefined[optionName];\n                    }\n                }\n                else if (refiners[optionName]) {\n                    refined[optionName] = refiners[optionName](raw[optionName]);\n                }\n                else {\n                    extra[optionName] = raw[optionName];\n                }\n                anyChanges = true;\n            }\n        }\n        if (anyChanges) {\n            this.currentViewOptionsInput = raw;\n            this.currentViewOptionsRefined = refined;\n        }\n        return {\n            rawOptions: this.currentViewOptionsInput,\n            refinedOptions: this.currentViewOptionsRefined,\n            extra,\n        };\n    }\n}\nfunction buildDateEnv$1(timeZone, explicitLocale, weekNumberCalculation, firstDay, weekText, pluginHooks, availableLocaleData, defaultSeparator) {\n    let locale = buildLocale(explicitLocale || availableLocaleData.defaultCode, availableLocaleData.map);\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone,\n        namedTimeZoneImpl: pluginHooks.namedTimeZonedImpl,\n        locale,\n        weekNumberCalculation,\n        firstDay,\n        weekText,\n        cmdFormatter: pluginHooks.cmdFormatter,\n        defaultSeparator,\n    });\n}\nfunction buildTheme(options, pluginHooks) {\n    let ThemeClass = pluginHooks.themeClasses[options.themeSystem] || StandardTheme;\n    return new ThemeClass(options);\n}\nfunction buildDateProfileGenerator(props) {\n    let DateProfileGeneratorClass = props.dateProfileGeneratorClass || DateProfileGenerator;\n    return new DateProfileGeneratorClass(props);\n}\nfunction buildViewApi(type, getCurrentData, dateEnv) {\n    return new ViewImpl(type, getCurrentData, dateEnv);\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, (eventSource) => eventSource.ui);\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    let eventUiBases = { '': eventUiSingleBase };\n    for (let defId in eventDefs) {\n        let def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\nfunction buildViewUiProps(calendarContext) {\n    let { options } = calendarContext;\n    return {\n        eventUiSingleBase: createEventUi({\n            display: options.eventDisplay,\n            editable: options.editable,\n            startEditable: options.eventStartEditable,\n            durationEditable: options.eventDurationEditable,\n            constraint: options.eventConstraint,\n            overlap: typeof options.eventOverlap === 'boolean' ? options.eventOverlap : undefined,\n            allow: options.eventAllow,\n            backgroundColor: options.eventBackgroundColor,\n            borderColor: options.eventBorderColor,\n            textColor: options.eventTextColor,\n            color: options.eventColor,\n            // classNames: options.eventClassNames // render hook will handle this\n        }, calendarContext),\n        selectionConfig: createEventUi({\n            constraint: options.selectConstraint,\n            overlap: typeof options.selectOverlap === 'boolean' ? options.selectOverlap : undefined,\n            allow: options.selectAllow,\n        }, calendarContext),\n    };\n}\nfunction computeIsLoading(state, context) {\n    for (let isLoadingFunc of context.pluginHooks.isLoadingFuncs) {\n        if (isLoadingFunc(state)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseContextBusinessHours(calendarContext) {\n    return parseBusinessHours(calendarContext.options.businessHours, calendarContext);\n}\nfunction warnUnknownOptions(options, viewName) {\n    for (let optionName in options) {\n        console.warn(`Unknown option '${optionName}'` +\n            (viewName ? ` for view '${viewName}'` : ''));\n    }\n}\n\nclass ToolbarSection extends BaseComponent {\n    render() {\n        let children = this.props.widgetGroups.map((widgetGroup) => this.renderWidgetGroup(widgetGroup));\n        return createElement('div', { className: 'fc-toolbar-chunk' }, ...children);\n    }\n    renderWidgetGroup(widgetGroup) {\n        let { props } = this;\n        let { theme } = this.context;\n        let children = [];\n        let isOnlyButtons = true;\n        for (let widget of widgetGroup) {\n            let { buttonName, buttonClick, buttonText, buttonIcon, buttonHint } = widget;\n            if (buttonName === 'title') {\n                isOnlyButtons = false;\n                children.push(createElement(\"h2\", { className: \"fc-toolbar-title\", id: props.titleId }, props.title));\n            }\n            else {\n                let isPressed = buttonName === props.activeButton;\n                let isDisabled = (!props.isTodayEnabled && buttonName === 'today') ||\n                    (!props.isPrevEnabled && buttonName === 'prev') ||\n                    (!props.isNextEnabled && buttonName === 'next');\n                let buttonClasses = [`fc-${buttonName}-button`, theme.getClass('button')];\n                if (isPressed) {\n                    buttonClasses.push(theme.getClass('buttonActive'));\n                }\n                children.push(createElement(\"button\", { type: \"button\", title: typeof buttonHint === 'function' ? buttonHint(props.navUnit) : buttonHint, disabled: isDisabled, \"aria-pressed\": isPressed, className: buttonClasses.join(' '), onClick: buttonClick }, buttonText || (buttonIcon ? createElement(\"span\", { className: buttonIcon }) : '')));\n            }\n        }\n        if (children.length > 1) {\n            let groupClassName = (isOnlyButtons && theme.getClass('buttonGroup')) || '';\n            return createElement('div', { className: groupClassName }, ...children);\n        }\n        return children[0];\n    }\n}\n\nclass Toolbar extends BaseComponent {\n    render() {\n        let { model, extraClassName } = this.props;\n        let forceLtr = false;\n        let startContent;\n        let endContent;\n        let sectionWidgets = model.sectionWidgets;\n        let centerContent = sectionWidgets.center;\n        if (sectionWidgets.left) {\n            forceLtr = true;\n            startContent = sectionWidgets.left;\n        }\n        else {\n            startContent = sectionWidgets.start;\n        }\n        if (sectionWidgets.right) {\n            forceLtr = true;\n            endContent = sectionWidgets.right;\n        }\n        else {\n            endContent = sectionWidgets.end;\n        }\n        let classNames = [\n            extraClassName || '',\n            'fc-toolbar',\n            forceLtr ? 'fc-toolbar-ltr' : '',\n        ];\n        return (createElement(\"div\", { className: classNames.join(' ') },\n            this.renderSection('start', startContent || []),\n            this.renderSection('center', centerContent || []),\n            this.renderSection('end', endContent || [])));\n    }\n    renderSection(key, widgetGroups) {\n        let { props } = this;\n        return (createElement(ToolbarSection, { key: key, widgetGroups: widgetGroups, title: props.title, navUnit: props.navUnit, activeButton: props.activeButton, isTodayEnabled: props.isTodayEnabled, isPrevEnabled: props.isPrevEnabled, isNextEnabled: props.isNextEnabled, titleId: props.titleId }));\n    }\n}\n\n// TODO: do function component?\nclass ViewContainer extends BaseComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            availableWidth: null,\n        };\n        this.handleEl = (el) => {\n            this.el = el;\n            setRef(this.props.elRef, el);\n            this.updateAvailableWidth();\n        };\n        this.handleResize = () => {\n            this.updateAvailableWidth();\n        };\n    }\n    render() {\n        let { props, state } = this;\n        let { aspectRatio } = props;\n        let classNames = [\n            'fc-view-harness',\n            (aspectRatio || props.liquid || props.height)\n                ? 'fc-view-harness-active' // harness controls the height\n                : 'fc-view-harness-passive', // let the view do the height\n        ];\n        let height = '';\n        let paddingBottom = '';\n        if (aspectRatio) {\n            if (state.availableWidth !== null) {\n                height = state.availableWidth / aspectRatio;\n            }\n            else {\n                // while waiting to know availableWidth, we can't set height to *zero*\n                // because will cause lots of unnecessary scrollbars within scrollgrid.\n                // BETTER: don't start rendering ANYTHING yet until we know container width\n                // NOTE: why not always use paddingBottom? Causes height oscillation (issue 5606)\n                paddingBottom = `${(1 / aspectRatio) * 100}%`;\n            }\n        }\n        else {\n            height = props.height || '';\n        }\n        return (createElement(\"div\", { \"aria-labelledby\": props.labeledById, ref: this.handleEl, className: classNames.join(' '), style: { height, paddingBottom } }, props.children));\n    }\n    componentDidMount() {\n        this.context.addResizeHandler(this.handleResize);\n    }\n    componentWillUnmount() {\n        this.context.removeResizeHandler(this.handleResize);\n    }\n    updateAvailableWidth() {\n        if (this.el && // needed. but why?\n            this.props.aspectRatio // aspectRatio is the only height setting that needs availableWidth\n        ) {\n            this.setState({ availableWidth: this.el.offsetWidth });\n        }\n    }\n}\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nclass EventClicking extends Interaction {\n    constructor(settings) {\n        super(settings);\n        this.handleSegClick = (ev, segEl) => {\n            let { component } = this;\n            let { context } = component;\n            let seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                let hasUrlContainer = elementClosest(ev.target, '.fc-event-forced-url');\n                let url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                context.emitter.trigger('eventClick', {\n                    el: segEl,\n                    event: new EventImpl(component.context, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: context.viewApi,\n                });\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        this.destroy = listenBySelector(settings.el, 'click', '.fc-event', // on both fg and bg events\n        this.handleSegClick);\n    }\n}\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nclass EventHovering extends Interaction {\n    constructor(settings) {\n        super(settings);\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        this.handleEventElRemove = (el) => {\n            if (el === this.currentSegEl) {\n                this.handleSegLeave(null, this.currentSegEl);\n            }\n        };\n        this.handleSegEnter = (ev, segEl) => {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                this.currentSegEl = segEl;\n                this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        this.handleSegLeave = (ev, segEl) => {\n            if (this.currentSegEl) {\n                this.currentSegEl = null;\n                this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        this.removeHoverListeners = listenToHoverBySelector(settings.el, '.fc-event', // on both fg and bg events\n        this.handleSegEnter, this.handleSegLeave);\n    }\n    destroy() {\n        this.removeHoverListeners();\n    }\n    triggerEvent(publicEvName, ev, segEl) {\n        let { component } = this;\n        let { context } = component;\n        let seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            context.emitter.trigger(publicEvName, {\n                el: segEl,\n                event: new EventImpl(context, seg.eventRange.def, seg.eventRange.instance),\n                jsEvent: ev,\n                view: context.viewApi,\n            });\n        }\n    }\n}\n\nclass CalendarContent extends PureComponent {\n    constructor() {\n        super(...arguments);\n        this.buildViewContext = memoize(buildViewContext);\n        this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        this.buildToolbarProps = memoize(buildToolbarProps);\n        this.headerRef = createRef();\n        this.footerRef = createRef();\n        this.interactionsStore = {};\n        // eslint-disable-next-line\n        this.state = {\n            viewLabelId: getUniqueDomId(),\n        };\n        // Component Registration\n        // -----------------------------------------------------------------------------------------------------------------\n        this.registerInteractiveComponent = (component, settingsInput) => {\n            let settings = parseInteractionSettings(component, settingsInput);\n            let DEFAULT_INTERACTIONS = [\n                EventClicking,\n                EventHovering,\n            ];\n            let interactionClasses = DEFAULT_INTERACTIONS.concat(this.props.pluginHooks.componentInteractions);\n            let interactions = interactionClasses.map((TheInteractionClass) => new TheInteractionClass(settings));\n            this.interactionsStore[component.uid] = interactions;\n            interactionSettingsStore[component.uid] = settings;\n        };\n        this.unregisterInteractiveComponent = (component) => {\n            let listeners = this.interactionsStore[component.uid];\n            if (listeners) {\n                for (let listener of listeners) {\n                    listener.destroy();\n                }\n                delete this.interactionsStore[component.uid];\n            }\n            delete interactionSettingsStore[component.uid];\n        };\n        // Resizing\n        // -----------------------------------------------------------------------------------------------------------------\n        this.resizeRunner = new DelayedRunner(() => {\n            this.props.emitter.trigger('_resize', true); // should window resizes be considered \"forced\" ?\n            this.props.emitter.trigger('windowResize', { view: this.props.viewApi });\n        });\n        this.handleWindowResize = (ev) => {\n            let { options } = this.props;\n            if (options.handleWindowResize &&\n                ev.target === window // avoid jqui events\n            ) {\n                this.resizeRunner.request(options.windowResizeDelay);\n            }\n        };\n    }\n    /*\n    renders INSIDE of an outer div\n    */\n    render() {\n        let { props } = this;\n        let { toolbarConfig, options } = props;\n        let toolbarProps = this.buildToolbarProps(props.viewSpec, props.dateProfile, props.dateProfileGenerator, props.currentDate, getNow(props.options.now, props.dateEnv), // TODO: use NowTimer????\n        props.viewTitle);\n        let viewVGrow = false;\n        let viewHeight = '';\n        let viewAspectRatio;\n        if (props.isHeightAuto || props.forPrint) {\n            viewHeight = '';\n        }\n        else if (options.height != null) {\n            viewVGrow = true;\n        }\n        else if (options.contentHeight != null) {\n            viewHeight = options.contentHeight;\n        }\n        else {\n            viewAspectRatio = Math.max(options.aspectRatio, 0.5); // prevent from getting too tall\n        }\n        let viewContext = this.buildViewContext(props.viewSpec, props.viewApi, props.options, props.dateProfileGenerator, props.dateEnv, props.theme, props.pluginHooks, props.dispatch, props.getCurrentData, props.emitter, props.calendarApi, this.registerInteractiveComponent, this.unregisterInteractiveComponent);\n        let viewLabelId = (toolbarConfig.header && toolbarConfig.header.hasTitle)\n            ? this.state.viewLabelId\n            : '';\n        return (createElement(ViewContextType.Provider, { value: viewContext },\n            toolbarConfig.header && (createElement(Toolbar, Object.assign({ ref: this.headerRef, extraClassName: \"fc-header-toolbar\", model: toolbarConfig.header, titleId: viewLabelId }, toolbarProps))),\n            createElement(ViewContainer, { liquid: viewVGrow, height: viewHeight, aspectRatio: viewAspectRatio, labeledById: viewLabelId },\n                this.renderView(props),\n                this.buildAppendContent()),\n            toolbarConfig.footer && (createElement(Toolbar, Object.assign({ ref: this.footerRef, extraClassName: \"fc-footer-toolbar\", model: toolbarConfig.footer, titleId: \"\" }, toolbarProps)))));\n    }\n    componentDidMount() {\n        let { props } = this;\n        this.calendarInteractions = props.pluginHooks.calendarInteractions\n            .map((CalendarInteractionClass) => new CalendarInteractionClass(props));\n        window.addEventListener('resize', this.handleWindowResize);\n        let { propSetHandlers } = props.pluginHooks;\n        for (let propName in propSetHandlers) {\n            propSetHandlers[propName](props[propName], props);\n        }\n    }\n    componentDidUpdate(prevProps) {\n        let { props } = this;\n        let { propSetHandlers } = props.pluginHooks;\n        for (let propName in propSetHandlers) {\n            if (props[propName] !== prevProps[propName]) {\n                propSetHandlers[propName](props[propName], props);\n            }\n        }\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleWindowResize);\n        this.resizeRunner.clear();\n        for (let interaction of this.calendarInteractions) {\n            interaction.destroy();\n        }\n        this.props.emitter.trigger('_unmount');\n    }\n    buildAppendContent() {\n        let { props } = this;\n        let children = props.pluginHooks.viewContainerAppends.map((buildAppendContent) => buildAppendContent(props));\n        return createElement(Fragment, {}, ...children);\n    }\n    renderView(props) {\n        let { pluginHooks } = props;\n        let { viewSpec } = props;\n        let viewProps = {\n            dateProfile: props.dateProfile,\n            businessHours: props.businessHours,\n            eventStore: props.renderableEventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isHeightAuto: props.isHeightAuto,\n            forPrint: props.forPrint,\n        };\n        let transformers = this.buildViewPropTransformers(pluginHooks.viewPropsTransformers);\n        for (let transformer of transformers) {\n            Object.assign(viewProps, transformer.transform(viewProps, props));\n        }\n        let ViewComponent = viewSpec.component;\n        return (createElement(ViewComponent, Object.assign({}, viewProps)));\n    }\n}\nfunction buildToolbarProps(viewSpec, dateProfile, dateProfileGenerator, currentDate, now, title) {\n    // don't force any date-profiles to valid date profiles (the `false`) so that we can tell if it's invalid\n    let todayInfo = dateProfileGenerator.build(now, undefined, false); // TODO: need `undefined` or else INFINITE LOOP for some reason\n    let prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate, false);\n    let nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate, false);\n    return {\n        title,\n        activeButton: viewSpec.type,\n        navUnit: viewSpec.singleUnit,\n        isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n        isPrevEnabled: prevInfo.isValid,\n        isNextEnabled: nextInfo.isValid,\n    };\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map((TheClass) => new TheClass());\n}\n\nclass Calendar extends CalendarImpl {\n    constructor(el, optionOverrides = {}) {\n        super();\n        this.isRendering = false;\n        this.isRendered = false;\n        this.currentClassNames = [];\n        this.customContentRenderId = 0;\n        this.handleAction = (action) => {\n            // actions we know we want to render immediately\n            switch (action.type) {\n                case 'SET_EVENT_DRAG':\n                case 'SET_EVENT_RESIZE':\n                    this.renderRunner.tryDrain();\n            }\n        };\n        this.handleData = (data) => {\n            this.currentData = data;\n            this.renderRunner.request(data.calendarOptions.rerenderDelay);\n        };\n        this.handleRenderRequest = () => {\n            if (this.isRendering) {\n                this.isRendered = true;\n                let { currentData } = this;\n                flushSync(() => {\n                    render(createElement(CalendarRoot, { options: currentData.calendarOptions, theme: currentData.theme, emitter: currentData.emitter }, (classNames, height, isHeightAuto, forPrint) => {\n                        this.setClassNames(classNames);\n                        this.setHeight(height);\n                        return (createElement(RenderId.Provider, { value: this.customContentRenderId },\n                            createElement(CalendarContent, Object.assign({ isHeightAuto: isHeightAuto, forPrint: forPrint }, currentData))));\n                    }), this.el);\n                });\n            }\n            else if (this.isRendered) {\n                this.isRendered = false;\n                render(null, this.el);\n                this.setClassNames([]);\n                this.setHeight('');\n            }\n        };\n        this.el = el;\n        this.renderRunner = new DelayedRunner(this.handleRenderRequest);\n        new CalendarDataManager({\n            optionOverrides,\n            calendarApi: this,\n            onAction: this.handleAction,\n            onData: this.handleData,\n        });\n    }\n    render() {\n        let wasRendering = this.isRendering;\n        if (!wasRendering) {\n            this.isRendering = true;\n        }\n        else {\n            this.customContentRenderId += 1;\n        }\n        this.renderRunner.request();\n        if (wasRendering) {\n            this.updateSize();\n        }\n    }\n    destroy() {\n        if (this.isRendering) {\n            this.isRendering = false;\n            this.renderRunner.request();\n        }\n    }\n    updateSize() {\n        flushSync(() => {\n            super.updateSize();\n        });\n    }\n    batchRendering(func) {\n        this.renderRunner.pause('batchRendering');\n        func();\n        this.renderRunner.resume('batchRendering');\n    }\n    pauseRendering() {\n        this.renderRunner.pause('pauseRendering');\n    }\n    resumeRendering() {\n        this.renderRunner.resume('pauseRendering', true);\n    }\n    resetOptions(optionOverrides, append) {\n        this.currentDataManager.resetOptions(optionOverrides, append);\n    }\n    setClassNames(classNames) {\n        if (!isArraysEqual(classNames, this.currentClassNames)) {\n            let { classList } = this.el;\n            for (let className of this.currentClassNames) {\n                classList.remove(className);\n            }\n            for (let className of classNames) {\n                classList.add(className);\n            }\n            this.currentClassNames = classNames;\n        }\n    }\n    setHeight(height) {\n        applyStyleProp(this.el, 'height', height);\n    }\n}\n\nfunction formatDate(dateInput, options = {}) {\n    let dateEnv = buildDateEnv(options);\n    let formatter = createFormatter(options);\n    let dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo,\n    });\n}\nfunction formatRange(startInput, endInput, options) {\n    let dateEnv = buildDateEnv(typeof options === 'object' && options ? options : {}); // pass in if non-null object\n    let formatter = createFormatter(options);\n    let startMeta = dateEnv.createMarkerMeta(startInput);\n    let endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: options.isEndExclusive,\n        defaultSeparator: BASE_OPTION_DEFAULTS.defaultRangeSeparator,\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv(settings) {\n    let locale = buildLocale(settings.locale || 'en', organizeRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    return new DateEnv(Object.assign(Object.assign({ timeZone: BASE_OPTION_DEFAULTS.timeZone, calendarSystem: 'gregory' }, settings), { locale }));\n}\n\n// HELPERS\n/*\nif nextDayThreshold is specified, slicing is done in an all-day fashion.\nyou can get nextDayThreshold from context.nextDayThreshold\n*/\nfunction sliceEvents(props, allDay) {\n    return sliceEventStore(props.eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? props.nextDayThreshold : null).fg;\n}\n\nconst version = '6.0.0';\n\nexport { Calendar, formatDate, formatRange, sliceEvents, version };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}